

<!DOCTYPE html>
<html class="writer-html5" lang="en-EN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.16. sail.MultiDecoder &mdash; SOPHON-SAIL 3.10.2
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01d1187f"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.17. SAIL Python high performance interface" href="1_high_perform_interface/high_perform_index.html" />
    <link rel="prev" title="5.15. sail.Blend" href="sail.Blend.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOPHON-SAIL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Catalog</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_disclaimer.html">1. Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_sail.html">2. SAIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_build.html">3. Compilation and Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_module_cpp.html">4. SAIL C++ API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../5_module_python.html">5. SAIL Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Basicfunction.html">5.1. Basic function</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_enum_type/enum_index.html">5.2. SAIL enum type</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Handle.html">5.3. sail.Handle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Tensor.html">5.4. sail.Tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.PaddingAtrr.html">5.5. sail.PaddingAtrr</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Engine.html">5.6. sail.Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.MultiEngine.html">5.7. sail.MultiEngine</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.bm_image.html">5.8. sail.bm_image</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.BMImage.html">5.9. sail.BMImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.BMImageArray.html">5.10. sail.BMImageArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Decoder.html">5.11. sail.Decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Encoder.html">5.12. sail.Encoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Decoder_RawStream.html">5.13. sail.Decoder_RawStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Bmcv.html">5.14. sail.Bmcv</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Blend.html">5.15. sail.Blend</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.16. sail.MultiDecoder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">5.16.1. __init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-read-timeout">5.16.2. set_read_timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-channel">5.16.3. add_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#del-channel">5.16.4. del_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clear-queue">5.16.5. clear_queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read">5.16.6. read</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">5.16.7. read_</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reconnect">5.16.8. reconnect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-frame-shape">5.16.9. get_frame_shape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-local-flag">5.16.10. set_local_flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-channel-fps">5.16.11. get_channel_fps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-drop-num">5.16.12. get_drop_num</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset-drop-num">5.16.13. reset_drop_num</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="1_high_perform_interface/high_perform_index.html">5.17. SAIL Python high performance interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../6_appendix.html">6. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOPHON-SAIL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../5_module_python.html"><span class="section-number">5. </span>SAIL Python API</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.16. </span>sail.MultiDecoder</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/module_python/sail.MultiDecoder.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sail-multidecoder">
<h1><span class="section-number">5.16. </span>sail.MultiDecoder<a class="headerlink" href="#sail-multidecoder" title="Link to this heading"></a></h1>
<p>Multichannel decoding interface, supporting simultaneous decoding of multichannel video.</p>
<section id="init">
<h2><span class="section-number">5.16.1. </span>__init__<a class="headerlink" href="#init" title="Link to this heading"></a></h2>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">queue_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
            <span class="n">tpu_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">discard_mode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>queue_size: int</p></li>
</ul>
<p>For each video, the length of the decoded cached image queue.</p>
<ul class="simple">
<li><p>tpu_id: int</p></li>
</ul>
<p>Tpu id that used, which defaults to 0.</p>
<ul class="simple">
<li><p>discard_mode: int</p></li>
</ul>
<p>Data discard method when the cache reaches the maximum value. 0 indicates that data is not put into the cache; 1 indicates that the image of the queue header is poped , and then push into the decoded image. The default value is 0.</p>
</section>
<section id="set-read-timeout">
<h2><span class="section-number">5.16.2. </span>set_read_timeout<a class="headerlink" href="#set-read-timeout" title="Link to this heading"></a></h2>
<p>Set the timeout period for reading images. This takes effect on the read and read_ interfaces.If the image is not obtained after the timeout, the result will be returned.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_read_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>timeout: int</p></li>
</ul>
<p>Timeout period, in seconds.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">multiDecoder</span><span class="o">.</span><span class="n">set_read_timeout</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="add-channel">
<h2><span class="section-number">5.16.3. </span>add_channel<a class="headerlink" href="#add-channel" title="Link to this heading"></a></h2>
<p>Add a channel</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">frame_skip_num</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>file_path: str</p></li>
</ul>
<p>The path or link to the video.</p>
<ul class="simple">
<li><p>frame_skip_num: int</p></li>
</ul>
<p>Number of active frame loss in decoded cache. The default value is 0, which means no active frame loss.</p>
<p><strong>Returns</strong></p>
<p>Returns the unique channel number corresponding to the video. The type is an integer.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="del-channel">
<h2><span class="section-number">5.16.4. </span>del_channel<a class="headerlink" href="#del-channel" title="Link to this heading"></a></h2>
<p>Delete a video channel that has been added.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">del_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel number of the video to be deleted.</p>
<p><strong>Returns</strong></p>
<p>Return 0 on success and other values on failure.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">del_channel</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="o">!=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;delete channel error!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="clear-queue">
<h2><span class="section-number">5.16.5. </span>clear_queue<a class="headerlink" href="#clear-queue" title="Link to this heading"></a></h2>
<p>Clears the image cache for the specified channel.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">clear_queue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel number of the video to be deleted.</p>
<p><strong>Returns:</strong></p>
<p>Return 0 on success and other values on failure.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">clear_queue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="o">!=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Clear failure!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="read">
<h2><span class="section-number">5.16.6. </span>read<a class="headerlink" href="#read" title="Link to this heading"></a></h2>
<p>Gets an image from the specified video channel.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">BMImage</span><span class="p">,</span>
        <span class="n">read_mode</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters1:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The specified video channel number.</p>
<ul class="simple">
<li><p>image: BMImage</p></li>
</ul>
<p>The decoded image.</p>
<ul class="simple">
<li><p>read_mode: int</p></li>
</ul>
<p>Mode of obtaining images. 0 indicates that one image is read directly from the cache without waiting, and will be returned whether it is read or not. Others representations wait until the image is retrieved or timeout, and then return.</p>
<p><strong>Returns1:</strong></p>
<p>Return 0 on success and other values on failure.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">frame_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">channel_list</span><span class="p">:</span>
            <span class="n">bmimg</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">BMImage</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">bmimg</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">frame_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bmimg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</dd>
<dt><strong>Interface2:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BMImage</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters2:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The specified video channel number.</p>
<p><strong>Returns2:</strong></p>
<p>Returns the decoded image of type BMImage.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">frame_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">channel_list</span><span class="p">:</span>
            <span class="n">bmimg</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="n">frame_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bmimg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="id1">
<h2><span class="section-number">5.16.7. </span>read_<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>Gets an image from the specified video channel, usually used with BMImageArray.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">read_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">bm_image</span><span class="p">,</span>
        <span class="n">read_mode</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters1:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The specified video channel number.</p>
<ul class="simple">
<li><p>image: bm_image</p></li>
</ul>
<p>The decoded image.</p>
<ul class="simple">
<li><p>read_mode: int</p></li>
</ul>
<p>Mode of obtaining images. 0 indicates that one image is read directly from the cache without waiting, and will be returned whether it is read or not. Others representations wait until the image is retrieved or timeout, and then return.</p>
<p><strong>Returns1:</strong></p>
<p>Return 0 on success and other values on failure.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">frame_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">channel_list</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">BMImage</span><span class="p">()</span>
            <span class="n">bmimg</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">read_</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">bmimg</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">frame_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bmimg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</dd>
<dt><strong>Interface2:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">read_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bm_image</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters2:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The specified video channel number.</p>
<p><strong>Returns2:</strong></p>
<p>Returns the decoded image of type bm_image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">frame_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">frame_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">channel_list</span><span class="p">:</span>
            <span class="n">bmimg</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">read_</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
            <span class="n">frame_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bmimg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="reconnect">
<h2><span class="section-number">5.16.8. </span>reconnect<a class="headerlink" href="#reconnect" title="Link to this heading"></a></h2>
<p>Reconnect the video of the corresponding channel.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel index of the input image.</p>
<p><strong>Returns</strong></p>
<p>Return 0 on success and other values on failure.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">reconnect</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-frame-shape">
<h2><span class="section-number">5.16.9. </span>get_frame_shape<a class="headerlink" href="#get-frame-shape" title="Link to this heading"></a></h2>
<p>Get the image shape of the corresponding channel.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_frame_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel index of the input image.</p>
<p><strong>Returns</strong></p>
<p>Returns a list:[1, number of channels, image height, image width].</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">multiDecoder</span><span class="o">.</span><span class="n">get_frame_shape</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-local-flag">
<h2><span class="section-number">5.16.10. </span>set_local_flag<a class="headerlink" href="#set-local-flag" title="Link to this heading"></a></h2>
<p>Set whether the video is a local video. If it is not called, the video is represented as a network video stream.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_local_flag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>flag: bool</p></li>
</ul>
<p>Standard bit, if True, fixed decoding of 25 frames per second per video channel</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">multiDecoder</span><span class="o">.</span><span class="n">set_local_flag</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-channel-fps">
<h2><span class="section-number">5.16.11. </span>get_channel_fps<a class="headerlink" href="#get-channel-fps" title="Link to this heading"></a></h2>
<p>Get the video fps of the specified channel</p>
<dl>
<dt><strong>Interface</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_channel_fps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The specified channel index</p>
<p><strong>Returns</strong></p>
<p>Returns the video fps of the specified channel</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">multiDecoder</span><span class="o">.</span><span class="n">get_channel_fps</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-drop-num">
<h2><span class="section-number">5.16.12. </span>get_drop_num<a class="headerlink" href="#get-drop-num" title="Link to this heading"></a></h2>
<p>Obtain the number of dropped frames.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_drop_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel index of the input image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">multiDecoder</span><span class="o">.</span><span class="n">get_drop_num</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="reset-drop-num">
<h2><span class="section-number">5.16.13. </span>reset_drop_num<a class="headerlink" href="#reset-drop-num" title="Link to this heading"></a></h2>
<p>Set the number of dropped frames to zeros.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">reset_drop_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">channel_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>channel_idx: int</p></li>
</ul>
<p>The channel index of the input image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">queue_size</span><span class="o">=</span><span class="mi">16</span>
    <span class="n">dev_id</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">discard_mode</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">multiDecoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">MultiDecoder</span><span class="p">(</span><span class="n">queue_size</span><span class="p">,</span><span class="n">dev_id</span><span class="p">,</span><span class="n">discard_mode</span><span class="p">)</span>
    <span class="n">channel_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;your_video_path&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">multiDecoder</span><span class="o">.</span><span class="n">add_channel</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="n">idx</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">channel_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">multiDecoder</span><span class="o">.</span><span class="n">reset_drop_num</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sail.Blend.html" class="btn btn-neutral float-left" title="5.15. sail.Blend" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="1_high_perform_interface/high_perform_index.html" class="btn btn-neutral float-right" title="5.17. SAIL Python high performance interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SOPHGO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>