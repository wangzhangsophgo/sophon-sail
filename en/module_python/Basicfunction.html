

<!DOCTYPE html>
<html class="writer-html5" lang="en-EN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.1. Basic function &mdash; SOPHON-SAIL 3.10.2
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01d1187f"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.2. SAIL enum type" href="0_enum_type/enum_index.html" />
    <link rel="prev" title="5. SAIL Python API" href="../5_module_python.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOPHON-SAIL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Catalog</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_disclaimer.html">1. Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_sail.html">2. SAIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_build.html">3. Compilation and Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_module_cpp.html">4. SAIL C++ API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../5_module_python.html">5. SAIL Python API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.1. Basic function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-available-tpu-num">5.1.1. get_available_tpu_num</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-print-flag">5.1.2. set_print_flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-dump-io-flag">5.1.3. set_dump_io_flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-loglevel">5.1.4. set_loglevel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-decoder-env">5.1.5. set_decoder_env</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base64-encode">5.1.6. base64_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base64-decode">5.1.7. base64_decode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base64-encode-array">5.1.8. base64_encode_array</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base64-decode-asarray">5.1.9. base64_decode_asarray</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-tpu-util">5.1.10. get_tpu_util</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-vpu-util">5.1.11. get_vpu_util</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-vpp-util">5.1.12. get_vpp_util</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-board-temp">5.1.13. get_board_temp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-chip-temp">5.1.14. get_chip_temp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-dev-stat">5.1.15. get_dev_stat</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="0_enum_type/enum_index.html">5.2. SAIL enum type</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Handle.html">5.3. sail.Handle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Tensor.html">5.4. sail.Tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.PaddingAtrr.html">5.5. sail.PaddingAtrr</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Engine.html">5.6. sail.Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.MultiEngine.html">5.7. sail.MultiEngine</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.bm_image.html">5.8. sail.bm_image</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.BMImage.html">5.9. sail.BMImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.BMImageArray.html">5.10. sail.BMImageArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Decoder.html">5.11. sail.Decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Encoder.html">5.12. sail.Encoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Decoder_RawStream.html">5.13. sail.Decoder_RawStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Bmcv.html">5.14. sail.Bmcv</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.Blend.html">5.15. sail.Blend</a></li>
<li class="toctree-l2"><a class="reference internal" href="sail.MultiDecoder.html">5.16. sail.MultiDecoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_high_perform_interface/high_perform_index.html">5.17. SAIL Python high performance interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../6_appendix.html">6. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOPHON-SAIL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../5_module_python.html"><span class="section-number">5. </span>SAIL Python API</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.1. </span>Basic function</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/module_python/Basicfunction.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-function">
<h1><span class="section-number">5.1. </span>Basic function<a class="headerlink" href="#basic-function" title="Link to this heading"></a></h1>
<section id="get-available-tpu-num">
<h2><span class="section-number">5.1.1. </span>get_available_tpu_num<a class="headerlink" href="#get-available-tpu-num" title="Link to this heading"></a></h2>
<p>Get the number of available Tensor Computing Processors.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_available_tpu_num</span><span class="p">()</span><span class="o">-&gt;</span><span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>tpu_num : int</p></li>
</ul>
<p>Number of available Tensor Computing Processors</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">tpu_len</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">get_available_tpu_num</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;available tpu:&#39;</span><span class="p">,</span><span class="n">tpu_len</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-print-flag">
<h2><span class="section-number">5.1.2. </span>set_print_flag<a class="headerlink" href="#set-print-flag" title="Link to this heading"></a></h2>
<p>Print main process time use.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_print_flag</span><span class="p">(</span><span class="n">print_flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>print_flag : bool</p></li>
</ul>
<p>If print_flag is true, print main process time use, Otherwise not print.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">set_print_flag</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-dump-io-flag">
<h2><span class="section-number">5.1.3. </span>set_dump_io_flag<a class="headerlink" href="#set-dump-io-flag" title="Link to this heading"></a></h2>
<p>Dump input date and output date.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_dump_io_flag</span><span class="p">(</span><span class="n">dump_io_flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>dump_io_flag : bool</p></li>
</ul>
<p>If dump_io_flag is true, dump input data and output data, Otherwise not dump.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">set_dump_io_flag</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-loglevel">
<h2><span class="section-number">5.1.4. </span>set_loglevel<a class="headerlink" href="#set-loglevel" title="Link to this heading"></a></h2>
<p>Set the logging level to the specified level.
Lower log levels are typically used in production environments to reduce performance overhead and the volume of log data,
while higher log levels are suitable for development and debugging in order to capture more detailed information.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_loglevel</span><span class="p">(</span><span class="n">sail</span><span class="o">.</span><span class="n">LogLevel</span> <span class="n">loglevel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>loglevel: LogLevel</p></li>
</ul>
<p>The Target log level as a sail.LogLevel enum value.
The optional values include <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>, <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code>, <code class="docutils literal notranslate"><span class="pre">ERR</span></code>, <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code>, <code class="docutils literal notranslate"><span class="pre">OFF</span></code>, and the default level is <code class="docutils literal notranslate"><span class="pre">INFO</span></code>.</p>
<p><strong>Returns:</strong></p>
<p>return: int</p>
<p>Returning 0 indicates the log level was set successfully,
whereas returning -1 indicates a failure due to an unknown log level.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">set_loglevel</span><span class="p">(</span><span class="n">sail</span><span class="o">.</span><span class="n">LogLevel</span><span class="o">.</span><span class="n">TRACE</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Set log level successfully&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unknown log level, set failed.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-decoder-env">
<h2><span class="section-number">5.1.5. </span>set_decoder_env<a class="headerlink" href="#set-decoder-env" title="Link to this heading"></a></h2>
<p>Set the parameters for the Decoder (including MutlDecoder) through environment variables.
These must be set before the Decoder is constructed; otherwise, the default values will be used.
This is mainly applicable to video decoding.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">set_decoder_env</span><span class="p">(</span><span class="n">env_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">env_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>env_name: str</p></li>
</ul>
<p>The property name to set for the Decoder. The available property names are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>‘rtsp_transport’</em>: The transport protocol used for RTSP. The default is TCP.</p></li>
<li><p><em>‘extra_frame_buffer_num’</em>: The maximum number of cached frames for the Decoder. The default is 5.</p></li>
<li><p><em>‘stimeout’</em>: Raise error timeout, in milliseconds. The default is 20000000, i.e., 20 seconds.</p></li>
<li><p><em>‘skip_non_idr’</em>: Decoding frame skip mode. 0, no skip; 1, skip Non-RAP frames; 2, skip non-reference frames. The default is 0.</p></li>
<li><p><em>‘fflags’</em>: format flags, like “nobuffer”. Read ffmpeg official docs for more details.</p></li>
<li><p><em>‘rtsp_flags’</em>: Set RTSP flags. The default is prefer_tcp.</p></li>
<li><p><em>‘refcounted_frames’</em>: When set to 1, the decoded images need to be manually released by the program; when set to 0, they are automatically released by the Decoder.</p></li>
<li><p><em>‘probesize’</em>: the max size of the data to analyze to get stream information. 5000000 by default.</p></li>
<li><p><em>‘analyzeduration’</em>: How many microseconds are analyzed to probe the input. 5000000 microseconds by default.</p></li>
<li><p><em>‘buffer_size’</em>: The maximum socket buffer size in bytes.</p></li>
<li><p><em>‘max_delay’</em>: Maximum demuxing delay in microseconds.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>env_value: str</p></li>
</ul>
<p>Environment value.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sail</span><span class="o">.</span><span class="n">set_decoder_env</span><span class="p">(</span><span class="s2">&quot;extra_frame_buffer_num&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span> <span class="c1"># Decrease buffer num for lower memory usage</span>
    <span class="n">sail</span><span class="o">.</span><span class="n">set_decoder_env</span><span class="p">(</span><span class="s2">&quot;probesize&quot;</span><span class="p">,</span> <span class="s2">&quot;1024&quot;</span><span class="p">)</span> <span class="c1"># Decrease probesize for lower latency</span>
    <span class="n">sail</span><span class="o">.</span><span class="n">set_decoder_env</span><span class="p">(</span><span class="s2">&quot;skip_non_idr&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="c1"># skip non-reference frames</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">Handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">)</span>
    <span class="n">image_name</span> <span class="o">=</span> <span class="s2">&quot;your_video.mp4&quot;</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">Decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">dev_id</span><span class="p">)</span>
    <span class="n">bmimg</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="base64-encode">
<h2><span class="section-number">5.1.6. </span>base64_encode<a class="headerlink" href="#base64-encode" title="Link to this heading"></a></h2>
<p>Encode byte data into base64 and return the encoded data as bytes. BM1688 and CV186AH PCIE mode are not supported.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">base64_encode</span><span class="p">(</span><span class="n">handle</span><span class="p">:</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">input_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>The handle of the device, created using sail.Handle(dev_id).</p>
<ul class="simple">
<li><p>input_bytes: bytes</p></li>
</ul>
<p>The byte data to be encoded.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>bytes</p></li>
</ul>
<p>The byte data encoded in base64.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
    <span class="c1"># to bytes</span>
    <span class="n">arr_bytes</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
    <span class="c1"># get handle</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">Handle</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># base64 encode</span>
    <span class="n">base64_encoded_arr</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">base64_encode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">arr_bytes</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="base64-decode">
<h2><span class="section-number">5.1.7. </span>base64_decode<a class="headerlink" href="#base64-decode" title="Link to this heading"></a></h2>
<p>Decode the byte-encoded data in base64 and return the decoded byte data. BM1688 and CV186AH PCIE mode are not supported.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">base64_decode</span><span class="p">(</span><span class="n">handle</span><span class="p">:</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">encode_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>The handle of the device, created using sail.Handle(dev_id).</p>
<ul class="simple">
<li><p>encode_bytes: bytes</p></li>
</ul>
<p>The byte-encoded data in base64.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>bytes</p></li>
</ul>
<p>The byte data decoded from base64.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span>
    <span class="c1"># tobytes</span>
    <span class="n">arr_bytes</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
    <span class="c1"># get handle</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">Handle</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># base64 encode</span>
    <span class="n">base64_encoded_arr</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">base64_encode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">arr_bytes</span><span class="p">)</span>

    <span class="c1"># decode</span>
    <span class="n">base64_decode_arr</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">base64_decode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">base64_encoded_arr</span><span class="p">)</span>
    <span class="c1"># byte to numpy</span>
    <span class="n">res_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">arr_bytes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="base64-encode-array">
<h2><span class="section-number">5.1.8. </span>base64_encode_array<a class="headerlink" href="#base64-encode-array" title="Link to this heading"></a></h2>
<p>Encode a numpy.array into base64, generating byte-encoded data. BM1688 and CV186AH PCIE mode are not supported.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">base64_encode_array</span><span class="p">(</span><span class="n">handle</span><span class="p">:</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">input_arr</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>The handle of the device, created using sail.Handle(dev_id).</p>
<ul class="simple">
<li><p>input_arr: numpy.ndarray</p></li>
</ul>
<p>The numpy.ndarray data to be encoded.</p>
<p><strong>Returns</strong></p>
<ul class="simple">
<li><p>bytes</p></li>
</ul>
<p>The byte data encoded in base64.</p>
</section>
<section id="base64-decode-asarray">
<h2><span class="section-number">5.1.9. </span>base64_decode_asarray<a class="headerlink" href="#base64-decode-asarray" title="Link to this heading"></a></h2>
<p>Decode base64 to generate numpy.array data.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">base64_decode_asarray</span><span class="p">(</span><span class="n">handle</span><span class="p">:</span> <span class="n">Handle</span><span class="p">,</span> <span class="n">encode_arr_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">array_type</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;uint8&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>The handle of the device, created using sail.Handle(dev_id).</p>
<ul class="simple">
<li><p>encode_arr_bytes: bytes</p></li>
</ul>
<p>The byte data of the numpy.ndarray encoded in base64.</p>
<ul class="simple">
<li><p>array_type: str</p></li>
</ul>
<p>The data type of numpy.ndarray, defaulting to uint8, supports float, uint8, int8, int16, int32, int64.</p>
<p><strong>Returns</strong></p>
<ul class="simple">
<li><p>numpy.array</p></li>
</ul>
<p>The one-dimensional numpy.array array decoded from base64.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="c1"># base64 encode</span>
    <span class="n">base64_encoded</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">base64_encode_array</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">arr</span><span class="p">)</span>
    <span class="c1"># base64 decode</span>
    <span class="n">res_array</span> <span class="o">=</span> <span class="n">sail</span><span class="o">.</span><span class="n">base64_decode_asarray</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">base64_encoded</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-tpu-util">
<h2><span class="section-number">5.1.10. </span>get_tpu_util<a class="headerlink" href="#get-tpu-util" title="Link to this heading"></a></h2>
<p>Get the processor utilization of the specified device</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_tpu_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>Returns the processor percent utilization of the device corresponding to the ID.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dev </span><span class="si">{}</span><span class="s2"> tpu-util is </span><span class="si">{}</span><span class="s2"> %&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_tpu_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">)))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-vpu-util">
<h2><span class="section-number">5.1.11. </span>get_vpu_util<a class="headerlink" href="#get-vpu-util" title="Link to this heading"></a></h2>
<p>Get the VPU utilization of the specified device</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_vpu_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>The vpu of bm1684 is 5-core, and the return value is a list of length 5. The vpu of bm1684x is 3-core, and the return value is a list of length 3.
Each integer in the List is the percent utilization of the corresponding core.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;get_vpu_util&quot;</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_vpu_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-vpp-util">
<h2><span class="section-number">5.1.12. </span>get_vpp_util<a class="headerlink" href="#get-vpp-util" title="Link to this heading"></a></h2>
<p>Get the VPP utilization of the specified device</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_vpp_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>The vpp of bm1684 and bm1684x are both 2-core, and the return value is a list of length 2.
Each integer in the List is the percent utilization of the corresponding core.</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;get_vpp_util&quot;</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_vpp_util</span><span class="p">(</span><span class="n">dev_id</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-board-temp">
<h2><span class="section-number">5.1.13. </span>get_board_temp<a class="headerlink" href="#get-board-temp" title="Link to this heading"></a></h2>
<p>Get the temperature of the board.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_board_temp</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>The board temperature for the corresponding card, with the default unit in Celsius (°C)</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;get_board_temp&quot;</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_board_temp</span><span class="p">(</span><span class="n">dev_id</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-chip-temp">
<h2><span class="section-number">5.1.14. </span>get_chip_temp<a class="headerlink" href="#get-chip-temp" title="Link to this heading"></a></h2>
<p>Get the temperature of the processor.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_chip_temp</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>The processor temperature for the corresponding card, with the default unit in Celsius (°C)</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;get_chip_temp&quot;</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_chip_temp</span><span class="p">(</span><span class="n">dev_id</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-dev-stat">
<h2><span class="section-number">5.1.15. </span>get_dev_stat<a class="headerlink" href="#get-dev-stat" title="Link to this heading"></a></h2>
<p>Get device memory information.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_dev_stat</span><span class="p">(</span><span class="n">dev_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameter:</strong></p>
<ul class="simple">
<li><p>dev_id: int</p></li>
</ul>
<p>Device ID.</p>
<p><strong>Return:</strong></p>
<p>A list of memory information for the corresponding device: [mem_total, mem_used, tpu_util].</p>
<dl>
<dt><strong>Sample</strong></dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sophon.sail</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sail</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">dev_id</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;get_dev_stat&quot;</span><span class="p">,</span><span class="n">sail</span><span class="o">.</span><span class="n">get_dev_stat</span><span class="p">(</span><span class="n">dev_id</span><span class="p">))</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../5_module_python.html" class="btn btn-neutral float-left" title="5. SAIL Python API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="0_enum_type/enum_index.html" class="btn btn-neutral float-right" title="5.2. SAIL enum type" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SOPHGO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>