

<!DOCTYPE html>
<html class="writer-html5" lang="en-EN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.14. Bmcv &mdash; SOPHON-SAIL 3.10.2
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01d1187f"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.15. Blend" href="cpp_Blend.html" />
    <link rel="prev" title="4.13. Decoder_RawStream" href="cpp_Decoder_RawStream.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOPHON-SAIL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Catalog</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_disclaimer.html">1. Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_sail.html">2. SAIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_build.html">3. Compilation and Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../4_module_cpp.html">4. SAIL C++ API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cpp_basicfunction.html">4.1. Basic function</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_enum-type/enum-index.html">4.2. SAIL enum type</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_PaddingAtrr.html">4.3. PaddingAtrr</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Handle.html">4.4. Handle</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Tensor.html">4.5. Tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Engine.html">4.6. Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_MultiEngine.html">4.7. MultiEngine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_bm_image.html">4.8. bm_image</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_BMImage.html">4.9. BMImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_BMImageArray.html">4.10. BMImageArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Decoder.html">4.11. Decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Encoder.html">4.12. Encoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Decoder_RawStream.html">4.13. Decoder_RawStream</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.14. Bmcv</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-constructor-of-bmcv">4.14.1. The constructor of Bmcv()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bm-image-to-tensor">4.14.2. bm_image_to_tensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tensor-to-bm-image">4.14.3. tensor_to_bm_image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#crop-and-resize">4.14.4. crop_and_resize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#crop">4.14.5. crop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resize">4.14.6. resize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-crop-and-resize">4.14.7. vpp_crop_and_resize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-crop-and-resize-padding">4.14.8. vpp_crop_and_resize_padding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-crop">4.14.9. vpp_crop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-resize">4.14.10. vpp_resize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-resize-padding">4.14.11. vpp_resize_padding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#warp">4.14.12. warp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-to">4.14.13. convert_to</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yuv2bgr">4.14.14. yuv2bgr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rectangle">4.14.15. rectangle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fillrectangle">4.14.16. fillRectangle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imwrite">4.14.17. imwrite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imread">4.14.18. imread</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-handle">4.14.19. get_handle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#crop-and-resize-padding">4.14.20. crop_and_resize_padding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-format">4.14.21. convert_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vpp-convert-format">4.14.22. vpp_convert_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#puttext">4.14.23. putText</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-add-weighted">4.14.24. image_add_weighted</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-copy-to">4.14.25. image_copy_to</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-copy-to-padding">4.14.26. image_copy_to_padding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nms">4.14.27. nms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drawpoint">4.14.28. drawPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#warp-perspective">4.14.29. warp_perspective</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-bm-data-type">4.14.30. get_bm_data_type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-bm-image-data-format">4.14.31. get_bm_image_data_format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imdecode">4.14.32. imdecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imencode">4.14.33. imencode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fft">4.14.34. fft</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-yuv420p-to-gray">4.14.35. convert_yuv420p_to_gray</a></li>
<li class="toctree-l3"><a class="reference internal" href="#polylines">4.14.36. polylines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mosaic">4.14.37. mosaic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transpose">4.14.38. transpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#watermark-superpose">4.14.39. watermark_superpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gaussian-blur">4.14.40. gaussian_blur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sobel">4.14.41. Sobel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drawlines">4.14.42. drawLines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stft">4.14.43. stft</a></li>
<li class="toctree-l3"><a class="reference internal" href="#istft">4.14.44. istft</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faiss-indexflatl2">4.14.45. faiss_indexflatL2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faiss-indexflatip">4.14.46. faiss_indexflatIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faiss-indexpq-encode">4.14.47. faiss_indexPQ_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faiss-indexpq-adc">4.14.48. faiss_indexPQ_ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faiss-indexpq-sdc">4.14.49. faiss_indexPQ_SDC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Blend.html">4.15. Blend</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_MultiDecoder.html">4.16. MultiDecoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_high_perform_interface/high_perform_index_cpp.html">4.17. SAIL C++ high performance interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5_module_python.html">5. SAIL Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_appendix.html">6. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOPHON-SAIL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../4_module_cpp.html"><span class="section-number">4. </span>SAIL C++ API</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.14. </span>Bmcv</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/module_cpp/cpp_Bmcv.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bmcv">
<h1><span class="section-number">4.14. </span>Bmcv<a class="headerlink" href="#bmcv" title="Link to this heading"></a></h1>
<p>Bmcv encapsulates commonly used image processing interfaces and supports hardware acceleration.</p>
<section id="the-constructor-of-bmcv">
<h2><span class="section-number">4.14.1. </span>The constructor of Bmcv()<a class="headerlink" href="#the-constructor-of-bmcv" title="Link to this heading"></a></h2>
<p>Init Bmcv</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Bmcv</span><span class="p">(</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>Specify the device handle used by Bmcv.</p>
</section>
<section id="bm-image-to-tensor">
<h2><span class="section-number">4.14.2. </span>bm_image_to_tensor<a class="headerlink" href="#bm-image-to-tensor" title="Link to this heading"></a></h2>
<p>Convert BMImage/BMImageArray to Tensor.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">bm_image_to_tensor</span><span class="p">(</span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">);</span>

<span class="n">Tensor</span><span class="w"> </span><span class="nf">bm_image_to_tensor</span><span class="p">(</span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>image: BMImage</p></li>
</ul>
<p>Input parameter. Image image that needs to be converted</p>
<ul class="simple">
<li><p>tensor: Tensor</p></li>
</ul>
<p>The converted Tensor.</p>
<p><strong>Return 1:</strong></p>
<ul class="simple">
<li><p>tensor: Tensor</p></li>
</ul>
<p>Returns the converted Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">image_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span><span class="nb">false</span><span class="p">,</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">bm_image_to_tensor</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Interface 2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">def</span><span class="w"> </span><span class="n">bm_image_to_tensor</span><span class="p">(</span>
<span class="w">        </span><span class="nl">image</span><span class="p">:</span><span class="w"> </span><span class="n">BMImageArray</span><span class="p">,</span>
<span class="w">        </span><span class="n">tensor</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Tensor</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>image: BMImageArray</p></li>
</ul>
<p>Input parameters. Image data that needs to be converted.</p>
<ul class="simple">
<li><p>tensor: Tensor</p></li>
</ul>
<p>Output parameters. The converted Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">image_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span><span class="nb">false</span><span class="p">,</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,{</span><span class="mi">1920</span><span class="p">,</span><span class="mi">1080</span><span class="p">},</span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="nb">true</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">bm_image_to_tensor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">tensor</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="tensor-to-bm-image">
<h2><span class="section-number">4.14.3. </span>tensor_to_bm_image<a class="headerlink" href="#tensor-to-bm-image" title="Link to this heading"></a></h2>
<p>Convert Tensor to BMImage/BMImageArray.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="n">tensor_to_bm_image</span><span class="p">(</span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">,</span><span class="w"> </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bgr2rgb</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">layout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;nchw&quot;</span><span class="p">));</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">tensor_to_bm_image</span><span class="p">(</span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">,</span><span class="w"> </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">bm_image_format_ext</span><span class="w"> </span><span class="n">format_</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="n">tensor_to_bm_image</span><span class="p">(</span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bgr2rgb</span><span class="o">=</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">layout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;nchw&quot;</span><span class="p">));</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">tensor_to_bm_image</span><span class="w"> </span><span class="p">(</span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">,</span><span class="w"> </span><span class="n">bm_image_format_ext</span><span class="w"> </span><span class="n">format_</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>tensor: Tensor</p></li>
</ul>
<p>Input parameters. The Tensor to be converted.</p>
<ul class="simple">
<li><p>img : BMImage</p></li>
</ul>
<p>The converted image.</p>
<p><strong>Returns 1:</strong></p>
<ul class="simple">
<li><p>image : BMImage</p></li>
</ul>
<p>Returns the converted image.</p>
<dl>
<dt><strong>Interface 2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w">   </span><span class="n">bm_image_to_tensor</span><span class="w"> </span><span class="p">(</span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">imgs</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="p">);</span>
<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="n">bm_image_to_tensor</span><span class="w"> </span><span class="p">(</span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">imgs</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>tensor: Tensor</p></li>
</ul>
<p>Input parameters. The Tensor to be converted.</p>
<ul class="simple">
<li><p>img : BMImage | BMImageArray</p></li>
</ul>
<p>Output parameters. Returns the converted image.</p>
<p><strong>Returns 2:</strong></p>
<ul class="simple">
<li><p>image : Tensor</p></li>
</ul>
<p>Return the converted tensor.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/tensor.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">bm_image_to_tensor</span><span class="p">(</span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">tensor_to_bm_image</span><span class="p">(</span><span class="n">tensor</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/tensor.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">bm_image_to_tensor</span><span class="p">(</span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">new_img</span><span class="p">();</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">tensor_to_bm_image</span><span class="p">(</span><span class="n">tensor</span><span class="p">,</span><span class="n">new_img</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="crop-and-resize">
<h2><span class="section-number">4.14.4. </span>crop_and_resize<a class="headerlink" href="#crop-and-resize" title="Link to this heading"></a></h2>
<p>Crop then resize an image or an image array.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">crop_and_resize</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">   </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">crop_and_resize</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">   </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the x-axis.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the y-axis.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>The width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>The height of the crop window.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<p><strong>Returns :</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop_and_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">ssail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop_and_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="crop">
<h2><span class="section-number">4.14.5. </span>crop<a class="headerlink" href="#crop" title="Link to this heading"></a></h2>
<p>Crop the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">crop</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>


<span class="n">BMImage</span><span class="w"> </span><span class="nf">crop</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">crop</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">crop</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>Input parameter. The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Output parameter. Processed image or image array.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>Input parameter. Start point x of the crop window.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>Input parameter. Start point y of the crop window.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>Input parameter. Width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>Input parameter. Height of the crop window.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="resize">
<h2><span class="section-number">4.14.6. </span>resize<a class="headerlink" href="#resize" title="Link to this heading"></a></h2>
<p>Resize the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">resize</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">   </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">resize</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">   </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="mi">640</span><span class="p">,</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">640</span><span class="p">,</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-crop-and-resize">
<h2><span class="section-number">4.14.7. </span>vpp_crop_and_resize<a class="headerlink" href="#vpp-crop-and-resize" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image cropping and resizing.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vpp_crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vpp_crop_and_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the x-axis.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the y-axis.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>The width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>The height of the crop window.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop_and_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop_and_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-crop-and-resize-padding">
<h2><span class="section-number">4.14.8. </span>vpp_crop_and_resize_padding<a class="headerlink" href="#vpp-crop-and-resize-padding" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image cropping and resizing, and padding to the specified size.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the x-axis.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the y-axis.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>The width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>The height of the crop window.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>padding : PaddingAtrr</p></li>
</ul>
<p>padding configuration information.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop_and_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop_and_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-crop">
<h2><span class="section-number">4.14.9. </span>vpp_crop<a class="headerlink" href="#vpp-crop" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image cropping.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_crop</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_crop</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vpp_crop</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vpp_crop</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the x-axis.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the y-axis.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>The width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>The height of the crop window.</p>
<p><strong>返回值说明:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_crop</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-resize">
<h2><span class="section-number">4.14.10. </span>vpp_resize<a class="headerlink" href="#vpp-resize" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image resize and use nearest neighbor interpolation algorithm.</p>
<dl>
<dt><strong>接口形式1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vpp_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vpp_resize</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_resize</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-resize-padding">
<h2><span class="section-number">4.14.11. </span>vpp_resize_padding<a class="headerlink" href="#vpp-resize-padding" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image resizing and padding.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_resize_padding</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">   </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vpp_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vpp_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>padding : PaddingAtrr</p></li>
</ul>
<p>The configuration information of padding.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>Interpolation algorithm for image resize, default is bmcv_resize_algorithm.BMCV_INTER_NEAREST</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg3</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="warp">
<h2><span class="section-number">4.14.12. </span>warp<a class="headerlink" href="#warp" title="Link to this heading"></a></h2>
<p>Perform an affine transformation on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">warp</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                            </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                            </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                                </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">bool</span><span class="w">                               </span><span class="n">similar_to_opencv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">warp</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                            </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                                </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">bool</span><span class="w">                               </span><span class="n">similar_to_opencv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">warp</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">                          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">                          </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                                      </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w">                                     </span><span class="n">similar_to_opencv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">warp</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">                          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                                      </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w">                                     </span><span class="n">similar_to_opencv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Processed image or image array.</p>
<ul class="simple">
<li><dl class="simple">
<dt>matrix: std::pair&lt;</dt><dd><p>std::tuple&lt;float, float, float&gt;,
std::tuple&lt;float, float, float&gt; &gt;</p>
</dd>
</dl>
</li>
</ul>
<p>2x3 affine transformation matrix.</p>
<ul class="simple">
<li><p>use_bilinear: int</p></li>
</ul>
<p>Whether to use bilinear interpolation, default to 0 using nearest neighbor interpolation, 1 being bilinear interpolation</p>
<ul class="simple">
<li><p>similar_to_opencv: bool</p></li>
</ul>
<p>Whether to use the interface aligning the affine transformation interface of OpenCV</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="n">using</span><span class="w"> </span><span class="n">AffineMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">AffineMatrix</span><span class="w"> </span><span class="n">rotated_matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mf">0.9996914396</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.02484</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">),</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mf">0.02484</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9996914396</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">warp</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">rotated_matrix</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="n">using</span><span class="w"> </span><span class="n">AffineMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">AffineMatrix</span><span class="w"> </span><span class="n">rotated_matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mf">0.9996914396</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.02484</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">),</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mf">0.02484</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9996914396</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg6</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">warp</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg6</span><span class="p">,</span><span class="w"> </span><span class="n">rotated_matrix</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="convert-to">
<h2><span class="section-number">4.14.13. </span>convert_to<a class="headerlink" href="#convert-to" title="Link to this heading"></a></h2>
<p>Perform a linear transformation on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">convert_to</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w">   </span><span class="o">&amp;</span><span class="n">alpha_beta</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">convert_to</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w">   </span><span class="o">&amp;</span><span class="n">alpha_beta</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">convert_to</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w">   </span><span class="o">&amp;</span><span class="n">alpha_beta</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">convert_to</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w">              </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w">   </span><span class="o">&amp;</span><span class="n">alpha_beta</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image or array of images to be processed.</p>
<ul class="simple">
<li><dl class="simple">
<dt>alpha_beta: std::tuple&lt;</dt><dd><p>std::pair&lt;float, float&gt;,
std::pair&lt;float, float&gt;,
std::pair&lt;float, float&gt; &gt;</p>
</dd>
</dl>
</li>
</ul>
<p>The coefficients of the linear transformation of the three channels ((a0, b0), (a1, b1), (a2, b2)).</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Output parameters. Processed image or image array.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the processed image or image array.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">alpha_beta</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_to</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">alpha_beta</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">alpha_beta</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_to</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg5</span><span class="p">,</span><span class="n">alpha_beta</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="yuv2bgr">
<h2><span class="section-number">4.14.14. </span>yuv2bgr<a class="headerlink" href="#yuv2bgr" title="Link to this heading"></a></h2>
<p>Convert the format of the image from YUV to BGR.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">yuv2bgr</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">yuv2bgr</span><span class="p">(</span><span class="n">BMImage</span><span class="w">  </span><span class="o">&amp;</span><span class="n">input</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | BMImageArray</p></li>
</ul>
<p>The image to be converted.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>Returns 0 for success, others for failure.</p>
<ul class="simple">
<li><p>output : BMImage | BMImageArray</p></li>
</ul>
<p>Returns the converted image.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">yuv2bgr</span><span class="p">(</span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg5</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">yuv2bgr</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg5</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="rectangle">
<h2><span class="section-number">4.14.15. </span>rectangle<a class="headerlink" href="#rectangle" title="Link to this heading"></a></h2>
<p>Draw a rectangular box on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">rectangle</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                         </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">h</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">rectangle</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">bm_image</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">h</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="c1">// BGR</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>image : BMImage | bm_image</p></li>
</ul>
<p>The image of the rectangle to be drawn.</p>
<ul class="simple">
<li><p>x0 : int</p></li>
</ul>
<p>The starting point of the rectangle on the x-axis.</p>
<ul class="simple">
<li><p>y0 : int</p></li>
</ul>
<p>The starting point of the rectangular box on the y-axis.</p>
<ul class="simple">
<li><p>w : int</p></li>
</ul>
<p>The width of the rectangular box.</p>
<ul class="simple">
<li><p>h : int</p></li>
</ul>
<p>The height of the rectangular box.</p>
<ul class="simple">
<li><p>color : tuple</p></li>
</ul>
<p>The color of the rectangle.</p>
<ul class="simple">
<li><p>thickness : int</p></li>
</ul>
<p>The thickness of the rectangular box lines.</p>
<p><strong>Returns:</strong></p>
<p>Returns 0 if the frame is successful, otherwise returns a non-zero value.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="fillrectangle">
<h2><span class="section-number">4.14.16. </span>fillRectangle<a class="headerlink" href="#fillrectangle" title="Link to this heading"></a></h2>
<p>Fill a rectangular box on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">fillRectangle</span><span class="p">(</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">                         </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">h</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">fillRectangle</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">bm_image</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">x0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">y0</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">w</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                             </span><span class="n">h</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>image : BMImage | bm_image</p></li>
</ul>
<p>The image of the rectangle to be drawn.</p>
<ul class="simple">
<li><p>x0 : int</p></li>
</ul>
<p>The starting point of the rectangle on the x-axis.</p>
<ul class="simple">
<li><p>y0 : int</p></li>
</ul>
<p>The starting point of the rectangular box on the y-axis.</p>
<ul class="simple">
<li><p>w : int</p></li>
</ul>
<p>The width of the rectangular box.</p>
<ul class="simple">
<li><p>h : int</p></li>
</ul>
<p>The height of the rectangular box.</p>
<ul class="simple">
<li><p>color : tuple</p></li>
</ul>
<p>The color of the rectangle.</p>
<p><strong>Returns:</strong></p>
<p>Returns 0 if the frame is successful, otherwise returns a non-zero value.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">fillRectangle</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="imwrite">
<h2><span class="section-number">4.14.17. </span>imwrite<a class="headerlink" href="#imwrite" title="Link to this heading"></a></h2>
<p>Save the image in a specific file.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">imwrite</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">filename</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">image</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">imwrite</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">filename</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">bm_image</span><span class="w">     </span><span class="o">&amp;</span><span class="n">image</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>file_name : string</p></li>
</ul>
<p>The name of the file.</p>
<ul class="simple">
<li><p>output : BMImage | bm_image</p></li>
</ul>
<p>The image needs to be saved.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>process_status : int</p></li>
</ul>
<p>Returns 0 if the save is successful, otherwise returns a non-zero value.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">&quot;new_3.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="imread">
<h2><span class="section-number">4.14.18. </span>imread<a class="headerlink" href="#imread" title="Link to this heading"></a></h2>
<p>Read and decode one image files and supports hard decoding only for JPEG baseline format. For other formats, such as PNG and BMP, soft decoding is used.
The returned BMImage for JPEG baseline images keeps YUV color space, and the pixel format depends on the sampling information in the file like YUV420.
The returned BMImage for other formats will maintain the corresponding color space of their input.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">imread</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">filename</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>filename : string</p></li>
</ul>
<p>Name of file to be read.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>output : sail.BMImage</p></li>
</ul>
<p>The decoded image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-handle">
<h2><span class="section-number">4.14.19. </span>get_handle<a class="headerlink" href="#get-handle" title="Link to this heading"></a></h2>
<p>Get the device handle Handle in Bmcv.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Handle</span><span class="w"> </span><span class="nf">get_handle</span><span class="p">();</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>The device handle Handle in Bmcv.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">get_handle</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="crop-and-resize-padding">
<h2><span class="section-number">4.14.20. </span>crop_and_resize_padding<a class="headerlink" href="#crop-and-resize-padding" title="Link to this heading"></a></h2>
<p>Crop and resize the image, then padding it.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>

<span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_crop_and_resize_padding</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_x0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_y0</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">crop_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">resize_h</span><span class="p">,</span>
<span class="w">    </span><span class="n">PaddingAtrr</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">padding_in</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmcv_resize_algorithm</span><span class="w">        </span><span class="n">resize_alg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BMCV_INTER_NEAREST</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>The image to be processed.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>The processed image.</p>
<ul class="simple">
<li><p>crop_x0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the x-axis.</p>
<ul class="simple">
<li><p>crop_y0 : int</p></li>
</ul>
<p>The starting point of the cropping window on the y-axis.</p>
<ul class="simple">
<li><p>crop_w : int</p></li>
</ul>
<p>The width of the crop window.</p>
<ul class="simple">
<li><p>crop_h : int</p></li>
</ul>
<p>The height of the crop window.</p>
<ul class="simple">
<li><p>resize_w : int</p></li>
</ul>
<p>The target width for image resize.</p>
<ul class="simple">
<li><p>resize_h : int</p></li>
</ul>
<p>The target height for image resize.</p>
<ul class="simple">
<li><p>padding : PaddingAtrr</p></li>
</ul>
<p>The configuration information of padding.</p>
<ul class="simple">
<li><p>resize_alg : bmcv_resize_algorithm</p></li>
</ul>
<p>The interpolation algorithm used by resize.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>process_status : int</p></li>
</ul>
<p>Returns 0 if the save is successful, otherwise returns a non-zero value.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Return the processed image.</p>
<dl>
<dt><strong>Sample1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop_and_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Sample2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg3</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">PaddingAtrr</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">;</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_stx</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_sty</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_w</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_h</span><span class="p">(</span><span class="mi">640</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_r</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_g</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">paddingatt</span><span class="p">.</span><span class="n">set_b</span><span class="p">(</span><span class="mi">114</span><span class="p">);</span>
<span class="w">    </span><span class="n">bm_image</span><span class="w"> </span><span class="n">bm_img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">crop_and_resize_padding</span><span class="p">(</span><span class="n">BMimg</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span><span class="w"> </span><span class="n">BMimg</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w"> </span><span class="n">paddingatt</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="convert-format">
<h2><span class="section-number">4.14.21. </span>convert_format<a class="headerlink" href="#convert-format" title="Link to this heading"></a></h2>
<p>Convert the image format to the format in the output and copy it to the output.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">convert_format</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">output</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>Input parameters. The image to be converted.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Output parameters. Convert the image in input to the image format of output and copy it to output.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_format</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg4</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Interface 2:</strong></p>
<p>Convert an image to the target format.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">convert_format</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">bm_image_format_ext</span><span class="w"> </span><span class="n">image_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FORMAT_BGR_PLANAR</span>
<span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>The image to be converted.</p>
<ul class="simple">
<li><p>image_format : bm_image_format_ext</p></li>
</ul>
<p>The target format for conversion.</p>
<p><strong>Returns 2:</strong></p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Returns the converted image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_format</span><span class="p">(</span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="vpp-convert-format">
<h2><span class="section-number">4.14.22. </span>vpp_convert_format<a class="headerlink" href="#vpp-convert-format" title="Link to this heading"></a></h2>
<p>Use VPP hardware to accelerate image format conversion.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">vpp_convert_format</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">output</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>Input parameters. The image to be converted.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Output parameters. Convert the image in input to the image format of output and copy it to output.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_convert_format</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">BMimg4</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Interface 2:</strong></p>
<p>Convert an image to the target format.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">vpp_convert_format</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">          </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">bm_image_format_ext</span><span class="w"> </span><span class="n">image_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FORMAT_BGR_PLANAR</span>
<span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>The image to be converted.</p>
<ul class="simple">
<li><p>image_format : bm_image_format_ext</p></li>
</ul>
<p>The target format for conversion.</p>
<p><strong>Returns 2:</strong></p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Returns the converted image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_convert_format</span><span class="p">(</span><span class="n">BMimg</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="puttext">
<h2><span class="section-number">4.14.23. </span>putText<a class="headerlink" href="#puttext" title="Link to this heading"></a></h2>
<p>Add text to the image.</p>
<p>Supported pixel format for input BMImage:
FORMAT_GRAY, FORMAT_YUV420P, FORMAT_YUV422P, FORMAT_YUV444P, FORMAT_NV12,
FORMAT_NV21, FORMAT_NV16, FORMAT_NV61</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">putText</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">BMImage</span><span class="w">                   </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w">               </span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">x</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">y</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="c1">// BGR</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                           </span><span class="n">fontScale</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">thickness</span><span class="o">=</span><span class="mi">1</span>
<span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">putText</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">bm_image</span><span class="w">                  </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w">               </span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">x</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">y</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="c1">// BGR</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                           </span><span class="n">fontScale</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                             </span><span class="n">thickness</span><span class="o">=</span><span class="mi">1</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input : BMImage | bm_image</p></li>
</ul>
<p>The image to be processed.</p>
<ul class="simple">
<li><p>text: string</p></li>
</ul>
<p>Text that needs to be added.</p>
<ul class="simple">
<li><p>x: int</p></li>
</ul>
<p>The starting point for adding the text on the x-axis.</p>
<ul class="simple">
<li><p>y: int</p></li>
</ul>
<p>The starting point for adding the text on the y-axis.</p>
<ul class="simple">
<li><p>color : tuple</p></li>
</ul>
<p>The color of the font.</p>
<ul class="simple">
<li><p>fontScale: int</p></li>
</ul>
<p>The size of the font.</p>
<ul class="simple">
<li><p>thickness : int</p></li>
</ul>
<p>The thickness of the font.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>process_status : int</p></li>
</ul>
<p>Returns 0 if processing is successful, otherwise returns a non-zero value.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">bgr_img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">yuv_img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_format</span><span class="p">(</span><span class="n">bgr_img</span><span class="p">,</span><span class="w"> </span><span class="n">FORMAT_YUV420P</span><span class="p">)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">putText</span><span class="p">(</span><span class="n">yuv_img</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;some text&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="mf">1.4</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="image-add-weighted">
<h2><span class="section-number">4.14.24. </span>image_add_weighted<a class="headerlink" href="#image-add-weighted" title="Link to this heading"></a></h2>
<p>Add two images with different weights.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">image_add_weighted</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">input1</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">alpha</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">input2</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">beta</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">gamma</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">output</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>input0 : BMImage</p></li>
</ul>
<p>Input parameters. The image 0 to be processed.</p>
<ul class="simple">
<li><p>alpha : float</p></li>
</ul>
<p>Input parameters. The weight alpha of the two images added together.</p>
<ul class="simple">
<li><p>input1 : BMImage</p></li>
</ul>
<p>Input parameters. The image 1 to be processed.</p>
<ul class="simple">
<li><p>beta : float</p></li>
</ul>
<p>Input parameters. The weight beta of the two images added together.</p>
<ul class="simple">
<li><p>gamma : float</p></li>
</ul>
<p>Input parameters. The weight gamma of the two images added together.</p>
<ul class="simple">
<li><p>output: BMImage</p></li>
</ul>
<p>Output parameters. The added image output = input1 * alpha + input2 * beta + gamma</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path2&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder1</span><span class="p">(</span><span class="n">image_name1</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder2</span><span class="p">(</span><span class="n">image_name2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder1</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder2</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">beta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">gamma</span><span class="o">=</span><span class="mf">0.8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">image_add_weighted</span><span class="p">(</span><span class="n">BMimg1</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">BMimg2</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gamma</span><span class="p">,</span><span class="n">BMimg2</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><strong>Interface 2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">image_add_weighted</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">input1</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">alpha</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">           </span><span class="o">&amp;</span><span class="n">input2</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">beta</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">             </span><span class="n">gamma</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>input0 : BMImage</p></li>
</ul>
<p>Input parameters. The image 0 to be processed.</p>
<ul class="simple">
<li><p>alpha : float</p></li>
</ul>
<p>Input parameters. The weight alpha of the two images added together.</p>
<ul class="simple">
<li><p>input1 : BMImage</p></li>
</ul>
<p>Input parameters. The image 1 to be processed.</p>
<ul class="simple">
<li><p>beta : float</p></li>
</ul>
<p>Input parameters. The weight beta of the two images added together.</p>
<ul class="simple">
<li><p>gamma : float</p></li>
</ul>
<p>Input parameters. The weight gamma of the two images added together.</p>
<p><strong>Returns 2:</strong></p>
<ul class="simple">
<li><p>output: BMImage</p></li>
</ul>
<p>Return the added image output = input1 * alpha + input2 * beta + gamma</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path2&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder1</span><span class="p">(</span><span class="n">image_name1</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder2</span><span class="p">(</span><span class="n">image_name2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder1</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder2</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">beta</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">gamma</span><span class="o">=</span><span class="mf">0.8</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">img</span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">image_add_weighted</span><span class="p">(</span><span class="n">BMimg1</span><span class="p">,</span><span class="n">alpha</span><span class="p">,</span><span class="n">BMimg2</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gamma</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="image-copy-to">
<h2><span class="section-number">4.14.25. </span>image_copy_to<a class="headerlink" href="#image-copy-to" title="Link to this heading"></a></h2>
<p>Copy data between images</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">image_copy_to</span><span class="p">(</span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">image_copy_to</span><span class="p">(</span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">start_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input: BMImage|BMImageArray</p></li>
</ul>
<p>Input parameter. The BMImage or BMImageArray to be copied.</p>
<ul class="simple">
<li><p>output: BMImage|BMImageArray</p></li>
</ul>
<p>Output parameter. Copied BMImage or BMImageArray</p>
<ul class="simple">
<li><p>start_x: int</p></li>
</ul>
<p>Input parameter. Copy to the starting point of the target image.</p>
<ul class="simple">
<li><p>start_y: int</p></li>
</ul>
<p>Input parameter. Copy to the starting point of the target image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path2&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder1</span><span class="p">(</span><span class="n">image_name1</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder2</span><span class="p">(</span><span class="n">image_name2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder1</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder2</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">image_copy_to</span><span class="p">(</span><span class="n">BMimg1</span><span class="p">,</span><span class="n">BMimg2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="image-copy-to-padding">
<h2><span class="section-number">4.14.26. </span>image_copy_to_padding<a class="headerlink" href="#image-copy-to-padding" title="Link to this heading"></a></h2>
<p>Copy and padding the image data between input and output.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">image_copy_to_padding</span><span class="p">(</span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">                        </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_r</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_g</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_b</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">start_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">start_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="n">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">image_copy_to_padding</span><span class="p">(</span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">                        </span><span class="n">BMImageArray</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_r</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_g</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">padding_b</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">start_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">start_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input: BMImage|BMImageArray</p></li>
</ul>
<p>Input parameter. The BMImage or BMImageArray to be copied.</p>
<ul class="simple">
<li><p>output: BMImage|BMImageArray</p></li>
</ul>
<p>Output parameter. Copied BMImage or BMImageArray.</p>
<ul class="simple">
<li><p>padding_r: int</p></li>
</ul>
<p>Input parameter. The padding value of the R channel.</p>
<ul class="simple">
<li><p>padding_g: int</p></li>
</ul>
<p>Input parameter. The padding value of the G channel.</p>
<ul class="simple">
<li><p>padding_b: int</p></li>
</ul>
<p>Input parameter. The padding value of the B channel.</p>
<ul class="simple">
<li><p>start_x: int</p></li>
</ul>
<p>Input parameter. Copy to the starting point on x-axis of the target image.</p>
<ul class="simple">
<li><p>start_y: int</p></li>
</ul>
<p>Input parameter. Copy to the starting point on y-axis of the target image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path2&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder1</span><span class="p">(</span><span class="n">image_name1</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder2</span><span class="p">(</span><span class="n">image_name2</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder1</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder2</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">image_copy_to_padding</span><span class="p">(</span><span class="n">BMimg1</span><span class="p">,</span><span class="n">BMimg2</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="nms">
<h2><span class="section-number">4.14.27. </span>nms<a class="headerlink" href="#nms" title="Link to this heading"></a></h2>
<p>Using Tensor Computing Processor for NMS</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1688, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">nms_proposal_t</span><span class="o">*</span><span class="w"> </span><span class="nf">nms</span><span class="p">(</span>
<span class="w">    </span><span class="n">face_rect_t</span><span class="w"> </span><span class="o">*</span><span class="n">input_proposal</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">proposal_size</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">threshold</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input_proposal: face_rect_t</p></li>
</ul>
<p>Data starting address.</p>
<ul class="simple">
<li><p>proposal_size: int</p></li>
</ul>
<p>The size of the detection frame data to be processed.</p>
<ul class="simple">
<li><p>threshold: float</p></li>
</ul>
<p>Threshold of nms.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>result: nms_proposal_t</p></li>
</ul>
<p>Returns the detection frame array after NMS.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">face_rect_t</span><span class="w"> </span><span class="o">*</span><span class="n">input_proposal</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">proposal_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
<span class="w">    </span><span class="n">nms_proposal_t</span><span class="o">*</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">nms</span><span class="p">(</span><span class="n">input_proposal</span><span class="p">,</span><span class="w"> </span><span class="n">proposal_size</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="drawpoint">
<h2><span class="section-number">4.14.28. </span>drawPoint<a class="headerlink" href="#drawpoint" title="Link to this heading"></a></h2>
<p>Draw points on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">drawPoint</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">center</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w">   </span><span class="c1">// BGR</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">drawPoint</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">bm_image</span><span class="w">  </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">center</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w">  </span><span class="c1">// BGR</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>image: BMImage</p></li>
</ul>
<p>Input image. Draw points directly on the BMImage as output.</p>
<ul class="simple">
<li><p>center: std::pair&lt;int,int&gt;</p></li>
</ul>
<p>The center coordinates of the point.</p>
<ul class="simple">
<li><p>color: std::tuple&lt;unsigned char, unsigned char, unsigned char&gt;</p></li>
</ul>
<p>The color of the point.</p>
<ul class="simple">
<li><p>radius: int</p></li>
</ul>
<p>The radius of the point.</p>
<p><strong>Returns</strong></p>
<p>If the point is drawn successfully, 0 is returned, otherwise a non-zero value is returned.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">drawPoint</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="warp-perspective">
<h2><span class="section-number">4.14.29. </span>warp_perspective<a class="headerlink" href="#warp-perspective" title="Link to this heading"></a></h2>
<p>Performs perspective transformation on the image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">warp_perspective</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                     </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w">       </span><span class="o">&amp;</span><span class="n">coordinate</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                         </span><span class="n">output_width</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                         </span><span class="n">output_height</span><span class="p">,</span>
<span class="w">    </span><span class="n">bm_image_format_ext</span><span class="w">         </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FORMAT_BGR_PLANAR</span><span class="p">,</span>
<span class="w">    </span><span class="n">bm_image_data_format_ext</span><span class="w">    </span><span class="n">dtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_TYPE_EXT_1N_BYTE</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                         </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>input: BMImage</p></li>
</ul>
<p>The image to be processed.</p>
<ul class="simple">
<li><dl class="simple">
<dt>coordinate: std::tuple&lt;</dt><dd><p>std::pair&lt;int,int&gt;,
std::pair&lt;int,int&gt;,
std::pair&lt;int,int&gt;,
std::pair&lt;int,int&gt; &gt;</p>
</dd>
</dl>
</li>
</ul>
<p>The original coordinates of the four vertices of the transformed area.</p>
<p>Such as, ((left_top.x, left_top.y), (right_top.x, right_top.y),
(left_bottom.x, left_bottom.y), (right_bottom.x, right_bottom.y))</p>
<ul class="simple">
<li><p>output_width: int</p></li>
</ul>
<p>The width of the output image.</p>
<ul class="simple">
<li><p>output_height: int</p></li>
</ul>
<p>The height of the output image.</p>
<ul class="simple">
<li><p>format: bm_image_format_ext</p></li>
</ul>
<p>The format of the output image.</p>
<ul class="simple">
<li><p>dtype: bm_image_data_format_ext</p></li>
</ul>
<p>The data type of the output image.</p>
<ul class="simple">
<li><p>use_bilinear: int</p></li>
</ul>
<p>Whether to use bilinear interpolation.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>output: BMImage</p></li>
</ul>
<p>Output the transformed image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&gt;</span><span class="w"> </span><span class="n">coordinate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">output_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">output_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span>
<span class="w">    </span><span class="n">bm_image_format_ext</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FORMAT_BGR_PLANAR</span><span class="p">;</span>
<span class="w">    </span><span class="n">bm_image_data_format_ext</span><span class="w"> </span><span class="n">dtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATA_TYPE_EXT_1N_BYTE</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">use_bilinear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">warp_perspective</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">coordinate</span><span class="p">,</span><span class="n">output_width</span><span class="p">,</span><span class="n">output_height</span><span class="p">,</span><span class="n">format</span><span class="p">,</span><span class="n">dtype</span><span class="p">,</span><span class="n">use_bilinear</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-bm-data-type">
<h2><span class="section-number">4.14.30. </span>get_bm_data_type<a class="headerlink" href="#get-bm-data-type" title="Link to this heading"></a></h2>
<p>Convert ImgDtype to Dtype</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="nf">get_bm_data_type</span><span class="p">(</span><span class="n">bm_image_data_format_ext</span><span class="w"> </span><span class="n">fmt</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>fmt: bm_image_data_format_ext</p></li>
</ul>
<p>The type to be converted.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: bm_data_type_t</p></li>
</ul>
<p>The converted type.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">get_bm_data_type</span><span class="p">(</span><span class="n">bm_image_data_format_ext</span><span class="o">::</span><span class="n">DATA_TYPE_EXT_FLOAT32</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-bm-image-data-format">
<h2><span class="section-number">4.14.31. </span>get_bm_image_data_format<a class="headerlink" href="#get-bm-image-data-format" title="Link to this heading"></a></h2>
<p>Convert Dtype to ImgDtype.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">bm_image_data_format_ext</span><span class="w"> </span><span class="nf">get_bm_image_data_format</span><span class="p">(</span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="n">dtype</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>dtype: bm_data_type_t</p></li>
</ul>
<p>The Dtype that needs to be converted.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: bm_image_data_format_ext</p></li>
</ul>
<p>Returns the converted type.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">bm_image_data_format_ext</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">get_bm_image_data_format</span><span class="p">(</span><span class="n">bm_data_type_t</span><span class="o">::</span><span class="n">BM_FLOAT32</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="imdecode">
<h2><span class="section-number">4.14.32. </span>imdecode<a class="headerlink" href="#imdecode" title="Link to this heading"></a></h2>
<p>Load the image from memory into BMImage.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">imdecode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">data_ptr</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">data_size</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>data_ptr: void*</p></li>
</ul>
<p>The data starting address.</p>
<ul class="simple">
<li><p>data_size: bytes</p></li>
</ul>
<p>The data length.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: BMImage</p></li>
</ul>
<p>Returns the decoded image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="w"> </span><span class="n">image_file</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">image_file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Error opening image file.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">image_data_bytes</span><span class="p">(</span>
<span class="w">        </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istreambuf_iterator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span><span class="n">image_file</span><span class="p">)),</span>
<span class="w">        </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istreambuf_iterator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">())</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">image_file</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">src_img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imdecode</span><span class="p">(</span><span class="n">image_data_bytes</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">image_data_bytes</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="imencode">
<h2><span class="section-number">4.14.33. </span>imencode<a class="headerlink" href="#imencode" title="Link to this heading"></a></h2>
<p>Encode an BMimage and return the encoded data.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">Bmcv</span><span class="o">::</span><span class="n">imencode</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ext</span><span class="p">,</span><span class="w"> </span><span class="n">bm_image</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">u_char</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">buf</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><strong>Interface2:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">Bmcv</span><span class="o">::</span><span class="n">imencode</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ext</span><span class="p">,</span><span class="w"> </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">u_char</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">buf</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>ext: string</p></li>
</ul>
<p>Input parameter. Image encoding format, supported formats include <code class="docutils literal notranslate"><span class="pre">&quot;.jpg&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;.png&quot;</span></code>, etc.</p>
<ul class="simple">
<li><p>image: bm_image/BMImage</p></li>
</ul>
<p>Input parameter. Input bm_image/BMImage, only FORMAT_BGR_PACKED, DATA_TYPE_EXT_1N_BYTE pictures are supported.</p>
<ul class="simple">
<li><p>buf: std::vector&lt;u_char&gt;</p></li>
</ul>
<p>Output parameter. Data that is encoded and placed in system memory.</p>
<p><strong>返回值说明:</strong></p>
<ul class="simple">
<li><p>ret: bool</p></li>
</ul>
<p>Returns 0 if encoding is successful and 1 if encoding fails.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">u_char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">encoded_data</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;.jpg&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imencode</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">encoded_data</span><span class="p">);</span>
<span class="w">    </span><span class="c1">//bool success = bmcv.imencode(ext, BMimg.data(), encoded_data);  接口形式1:bm_image</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="fft">
<h2><span class="section-number">4.14.34. </span>fft<a class="headerlink" href="#fft" title="Link to this heading"></a></h2>
<p>Implement the Fast Fourier Transform of Tensor.</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1688, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fft</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">forward</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_real</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fft</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">forward</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_real</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_imag</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>forward: bool</p></li>
</ul>
<p>Whether to perform forward migration.</p>
<ul class="simple">
<li><p>input_real: Tensor</p></li>
</ul>
<p>The real part of the input.</p>
<ul class="simple">
<li><p>input_imag: Tensor</p></li>
</ul>
<p>The imaginary part of the input.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: std::vector&lt;Tensor&gt;</p></li>
</ul>
<p>Returns the real and imaginary parts of the output.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_real</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">forward</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="c1">//std::vector&lt;sail::Tensor&gt; result_real = bmcv.fft(forward, input_real);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_imag</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result_complex</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">fft</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span><span class="w"> </span><span class="n">input_real</span><span class="p">,</span><span class="n">input_imag</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="convert-yuv420p-to-gray">
<h2><span class="section-number">4.14.35. </span>convert_yuv420p_to_gray<a class="headerlink" href="#convert-yuv420p-to-gray" title="Link to this heading"></a></h2>
<p>Convert pictures in YUV420P format to grayscale images.</p>
<dl>
<dt><strong>Interface 1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">convert_yuv420p_to_gray</span><span class="p">(</span><span class="n">BMImage</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">BMImage</span><span class="o">&amp;</span><span class="w"> </span><span class="n">output</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>Input parameters. The image to be converted.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Output parameters. Converted image.</p>
<p><strong>Interface 2:</strong></p>
<p>Convert pictures in YUV420P format to grayscale images.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">convert_yuv420p_to_gray_</span><span class="p">(</span><span class="n">bm_image</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">bm_image</span><span class="o">&amp;</span><span class="w"> </span><span class="n">output</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>input : bm_image</p></li>
</ul>
<p>The image to be converted.</p>
<ul class="simple">
<li><p>output : bm_image</p></li>
</ul>
<p>The converted image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path1&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">img</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">convert_yuv420p_to_gray</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">img</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="polylines">
<h2><span class="section-number">4.14.36. </span>polylines<a class="headerlink" href="#polylines" title="Link to this heading"></a></h2>
<p>Draw one or more line segments on an image,
so that the function of drawing polygons can be realized, and the color and width of the line can be specified.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">polylines</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pts</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isClosed</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">thickness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">shift</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>img : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<ul class="simple">
<li><p>pts : std::vector&lt;std::vector&lt;std::pair&lt;int,int&gt;&gt;&gt;</p></li>
</ul>
<p>The starting point and end point coordinates of the line segment, multiple coordinate points can be entered. The upper left corner of the image is the origin,
extending to the right in the x direction and extending down in the y direction.</p>
<ul class="simple">
<li><p>isClosed : bool</p></li>
</ul>
<p>Whether the graph is closed.</p>
<ul class="simple">
<li><p>color :  std::tuple&lt;unsigned char, unsigned char, unsigned char&gt;</p></li>
</ul>
<p>The color of the line is the value of the three RGB channels.</p>
<ul class="simple">
<li><p>thickness : int</p></li>
</ul>
<p>The width of the lines is recommended to be even for YUV format images.</p>
<ul class="simple">
<li><p>shift : int</p></li>
</ul>
<p>Polygon scaling multiple. Default is not scaling. The scaling factor is(1/2)^shift。</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>returns 0 if success.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">pts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{{</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">}},</span>
<span class="w">        </span><span class="p">{{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">}}</span>

<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isClosed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">thickness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">shift</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">polylines</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">pts</span><span class="p">,</span><span class="w"> </span><span class="n">isClosed</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">thickness</span><span class="p">,</span><span class="w"> </span><span class="n">shift</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Polylines drawn successfully.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Failed to draw polylines.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="mosaic">
<h2><span class="section-number">4.14.37. </span>mosaic<a class="headerlink" href="#mosaic" title="Link to this heading"></a></h2>
<p>Print one or more mosaics on an image.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">mosaic</span><span class="p">(</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">mosaic_num</span><span class="p">,</span>
<span class="w">   </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span>
<span class="w">   </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">rects</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">is_expand</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>mosaic_num : int</p></li>
</ul>
<p>Number of mosaics, length of list in rects.</p>
<ul class="simple">
<li><p>img : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<ul class="simple">
<li><p>rects : vector&lt;vector&lt;int&gt;&gt;</p></li>
</ul>
<p>Multiple Mosaic positions, the parameters in each element in the list are
[Mosaic at X-axis start point, Mosaic at Y-axis start point, Mosaic width, Mosaic height].</p>
<ul class="simple">
<li><p>is_expand : int</p></li>
</ul>
<p>Whether to expand the column.
A value of 0 means that the column is not expanded,
and a value of 1 means that a macro block (8 pixels) is expanded around the original Mosaic.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>returns 0 if success.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">rects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">mosaic_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rects</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">/</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">is_expand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">mosaic</span><span class="p">(</span><span class="n">mosaic_num</span><span class="p">,</span><span class="w"> </span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">rects</span><span class="p">,</span><span class="w"> </span><span class="n">is_expand</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Mosaic applied successfully.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="p">.</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Failed to apply mosaic.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="transpose">
<h2><span class="section-number">4.14.38. </span>transpose<a class="headerlink" href="#transpose" title="Link to this heading"></a></h2>
<p>Transpose of image width and height.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">Bmcv::transpose</span><span class="p">(</span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">src</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters1:</strong></p>
<ul class="simple">
<li><p>src : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<p><strong>Returns2:</strong></p>
<ul class="simple">
<li><p>output: BMImage:</p></li>
</ul>
<p>output BMImage.</p>
<dl>
<dt><strong>Interface2:</strong></dt><dd><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">Bmcv::transpose</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">src</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters2:</strong></p>
<ul class="simple">
<li><p>src : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<ul class="simple">
<li><p>dst : BMImage</p></li>
</ul>
<p>output BMImage.</p>
<p><strong>Returns2:</strong></p>
<ul class="simple">
<li><p>ret : int</p></li>
</ul>
<p>returns 0 if success.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_img.jpg&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_output</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">BMimg_input</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;gaussian_blur failed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">&quot;output.jpg&quot;</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="watermark-superpose">
<h2><span class="section-number">4.14.39. </span>watermark_superpose<a class="headerlink" href="#watermark-superpose" title="Link to this heading"></a></h2>
<p>Implement adding multiple watermarks to images.</p>
<dl>
<dt><strong>接口形式:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">Bmcv::watermark_superpose</span><span class="p">(</span>
<span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">img</span><span class="p">,</span>
<span class="n">string</span><span class="w"> </span><span class="n">water_name</span><span class="p">,</span>
<span class="kt">int</span><span class="w"> </span><span class="n">bitmap_type</span><span class="p">,</span>
<span class="kt">int</span><span class="w"> </span><span class="n">pitch</span><span class="p">,</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">rects</span><span class="p">,</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">color</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>参数说明:</strong></p>
<ul class="simple">
<li><p>Image: BMImage</p></li>
</ul>
<p>Input image</p>
<ul class="simple">
<li><p>Watername: string</p></li>
</ul>
<p>Watermark file path</p>
<ul class="simple">
<li><p>Bitmap_type: int</p></li>
</ul>
<p>Input parameters. Watermark type, a value of 0 indicates that the watermark is an 8-bit data type (with transparency information), and a value of 1 indicates that the watermark is a 1-bit data type (without transparency information).</p>
<ul class="simple">
<li><p>Pitch: int</p></li>
</ul>
<p>Input parameters. The number of bytes per line in a watermark file can be understood as the width of the watermark.</p>
<ul class="simple">
<li><p>Rects: vector</p></li>
</ul>
<p>Input parameters. Watermark position, including the starting point and width/height of each watermark.</p>
<ul class="simple">
<li><p>Color: const std:: tuple&lt;int, int, int&gt;</p></li>
</ul>
<p>Input parameters. The color of the watermark.</p>
<p><strong>Return value description:</strong></p>
<ul class="simple">
<li><p>Ret: int</p></li>
</ul>
<p>Whether the return was successful</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">water_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_watermark_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">bitmap_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pitch</span><span class="w"> </span><span class="o">=</span><span class="mi">117</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">rects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">117</span><span class="p">,</span><span class="w"> </span><span class="mi">79</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">117</span><span class="p">,</span><span class="w"> </span><span class="mi">79</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">watermark_superpose</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="w"> </span><span class="n">water_name</span><span class="p">,</span><span class="w"> </span><span class="n">bitmap_type</span><span class="p">,</span><span class="w"> </span><span class="n">pitch</span><span class="p">,</span><span class="w"> </span><span class="n">rects</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Watermarks added successfully.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Failed to add watermarks.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="gaussian-blur">
<h2><span class="section-number">4.14.40. </span>gaussian_blur<a class="headerlink" href="#gaussian-blur" title="Link to this heading"></a></h2>
<p>This interface is used for image Gaussian filtering.
<strong>Note: The previous SDK does not support BM1684X.
For details about whether the current SDK supports BM1684X, check the page “BMCV API” in《Multimedia User Guide》. *</strong></p>
<p><strong>Interface1:</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">gaussian_blur</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">kw</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">kh</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                        </span><span class="n">sigmaX</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                        </span><span class="n">sigmaY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters1:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Output BMImage.</p>
<ul class="simple">
<li><p>kw : int</p></li>
</ul>
<p>The size of kernel in the width direction.</p>
<ul class="simple">
<li><p>kh : int</p></li>
</ul>
<p>The size of kernel in the height direction.</p>
<ul class="simple">
<li><p>sigmaX : float</p></li>
</ul>
<p>Gaussian kernel standard deviation in the X direction.</p>
<ul class="simple">
<li><p>sigmaY : float</p></li>
</ul>
<p>Gaussian kernel standard deviation in the Y direction.Default is 0,
which means that it is the same standard deviation as the Gaussian kernel in the X direction.</p>
<p><strong>Returns1:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>returns 0 if success.</p>
<p><strong>Interface2:</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">gaussian_blur</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w">                      </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">kw</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                          </span><span class="n">kh</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                        </span><span class="n">sigmaX</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w">                        </span><span class="n">sigmaY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Parameters2:</strong></p>
<ul class="simple">
<li><p>input : BMImage</p></li>
</ul>
<p>Input BMImage.</p>
<ul class="simple">
<li><p>kw : int</p></li>
</ul>
<p>The size of kernel in the width direction.</p>
<ul class="simple">
<li><p>kh : int</p></li>
</ul>
<p>The size of kernel in the height direction.</p>
<ul class="simple">
<li><p>sigmaX : float</p></li>
</ul>
<p>Gaussian kernel standard deviation in the X direction.</p>
<ul class="simple">
<li><p>sigmaY : float</p></li>
</ul>
<p>Gaussian kernel standard deviation in the Y direction.Default is 0,
which means that it is the same standard deviation as the Gaussian kernel in the X direction.</p>
<p><strong>Returns2:</strong></p>
<ul class="simple">
<li><p>output : BMImage</p></li>
</ul>
<p>Returns a Gaussian filtered image.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_img.jpg&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_output</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">gaussian_blur</span><span class="p">(</span><span class="n">BMimg_input</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;gaussian_blur failed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">&quot;output.jpg&quot;</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="sobel">
<h2><span class="section-number">4.14.41. </span>Sobel<a class="headerlink" href="#sobel" title="Link to this heading"></a></h2>
<p>Sobel operator for edge detection.</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1684X/BM1688, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">Sobel</span><span class="p">(</span>
<span class="w">     </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">     </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">output</span><span class="p">,</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">dx</span><span class="p">,</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">dy</span><span class="p">,</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">ksize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">     </span><span class="kt">float</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">     </span><span class="kt">float</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters1:</strong></p>
<ul class="simple">
<li><p>input</p></li>
</ul>
<p>Input BMImage</p>
<ul class="simple">
<li><p>output</p></li>
</ul>
<p>Output BMImage</p>
<ul class="simple">
<li><p>dx</p></li>
</ul>
<p>Order of the derivative x.</p>
<ul class="simple">
<li><p>dy</p></li>
</ul>
<p>Order of the derivative y</p>
<ul class="simple">
<li><p>ksize</p></li>
</ul>
<p>ize of the extended Sobel kernel; it must be -1, 1, 3, 5, or 7. -1 means 3x3 Scharr filter will be used.</p>
<ul class="simple">
<li><p>scale</p></li>
</ul>
<p>Optional scale factor for the computed derivative values; by default, no scaling is applied</p>
<ul class="simple">
<li><p>delta</p></li>
</ul>
<p>Optional delta value that is added to the results prior to storing them in dst.</p>
<p><strong>Returns1:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>returns 0 if success.</p>
<dl>
<dt><strong>Interface2:</strong></dt><dd><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BMImage</span><span class="w"> </span><span class="nf">Sobel</span><span class="p">(</span>
<span class="w">    </span><span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dx</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dy</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ksize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters2:</strong></p>
<ul class="simple">
<li><p>input</p></li>
</ul>
<p>Input BMImage</p>
<ul class="simple">
<li><p>dx</p></li>
</ul>
<p>Order of the derivative x.</p>
<ul class="simple">
<li><p>dy</p></li>
</ul>
<p>Order of the derivative y</p>
<ul class="simple">
<li><p>ksize</p></li>
</ul>
<p>ize of the extended Sobel kernel; it must be -1, 1, 3, 5, or 7. -1 means 3x3 Scharr filter will be used.</p>
<ul class="simple">
<li><p>scale</p></li>
</ul>
<p>Optional scale factor for the computed derivative values; by default, no scaling is applied</p>
<ul class="simple">
<li><p>delta</p></li>
</ul>
<p>Optional delta value that is added to the results prior to storing them in dst.</p>
<p><strong>Returns2:</strong></p>
<ul class="simple">
<li><p>output: BMImage</p></li>
</ul>
<p>returns porcessed BMImage.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_img.jpg&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg_output</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">Sobel</span><span class="p">(</span><span class="n">BMimg_input</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Sobel failed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">bmcv</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">&quot;output.jpg&quot;</span><span class="p">,</span><span class="n">BMimg_output</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="drawlines">
<h2><span class="section-number">4.14.42. </span>drawLines<a class="headerlink" href="#drawlines" title="Link to this heading"></a></h2>
<p>This function can be used to draw one or several line segments on an image, which can be used to draw polygons. It supports specifying the color and thickness of the lines.</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1684X, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">Bmcv::drawLines</span><span class="p">(</span>
<span class="n">BMImage</span><span class="w"> </span><span class="o">&amp;</span><span class="n">image</span><span class="p">,</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">start_points</span><span class="p">,</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">end_points</span><span class="p">,</span>
<span class="kt">int</span><span class="w"> </span><span class="n">line_num</span><span class="p">,</span>
<span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="p">,</span>
<span class="kt">int</span><span class="w"> </span><span class="n">thickness</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>image : BMImage</p></li>
</ul>
<p>Input image, needs to be one of the supported formats.</p>
<ul class="simple">
<li><p>start_points : std::vector&lt;std::pair&lt;int,int&gt;&gt;</p></li>
</ul>
<p>List of coordinates for the starting points of the line segments.</p>
<ul class="simple">
<li><p>end_points : std::vector&lt;std::pair&lt;int,int&gt;&gt;</p></li>
</ul>
<p>List of coordinates for the ending points of the line segments. The size of start_points and end_points must be the same and match the line_num parameter.</p>
<ul class="simple">
<li><p>line_num :  int</p></li>
</ul>
<p>The number of line segments to draw.</p>
<ul class="simple">
<li><p>color : std::tuple&lt;unsigned char, unsigned char, unsigned char&gt;</p></li>
</ul>
<p>The color of the line segments, corresponding to the RGB channels.</p>
<ul class="simple">
<li><p>thickness : int</p></li>
</ul>
<p>The thickness of the line segments.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>ret: int</p></li>
</ul>
<p>returns 0 if success.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">image_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_image_path&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Decoder</span><span class="w"> </span><span class="n">decoder</span><span class="p">(</span><span class="n">image_name</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">decoder</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">start_points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">}};</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">end_points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">}};</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">line_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">thickness</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">BMImage</span><span class="w"> </span><span class="n">BMimg2</span><span class="p">;</span>
<span class="w">    </span><span class="n">BMimg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">vpp_convert_format</span><span class="p">(</span><span class="n">BMimg</span><span class="p">,</span><span class="n">FORMAT_YUV420P</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">drawLines</span><span class="p">(</span><span class="n">BMimg2</span><span class="p">,</span><span class="w"> </span><span class="n">start_points</span><span class="p">,</span><span class="w"> </span><span class="n">end_points</span><span class="p">,</span><span class="w"> </span><span class="n">line_num</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">thickness</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="stft">
<h2><span class="section-number">4.14.43. </span>stft<a class="headerlink" href="#stft" title="Link to this heading"></a></h2>
<p>Short-Time Fourier Transform(STFT)</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1684X, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">stft</span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_real</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_imag</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">realInput</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">normalize</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n_fft</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hop_len</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pad_mode</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">win_mode</span>
<span class="w">    </span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>参数说明:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>input_real: numpy.ndarray or Tensor</dt><dd><p>The real part of the input signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>input_imag: numpy.ndarray or Tensor</dt><dd><p>The imaginary part of the input signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>real_input: bool</dt><dd><p>A flag indicating whether to use only real input.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>normalize: bool</dt><dd><p>A flag indicating whether to normalize the output.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>n_fft: int</dt><dd><p>The number of FFT points used in the STFT computation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>hop_len: int</dt><dd><p>The step size for sliding the window.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pad_mode: int</dt><dd><p>The padding mode for the input signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>win_mode: int</dt><dd><p>The type of window function.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the real part and imaginary part of the output.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4096</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_real</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_imag</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">real_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">normalize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">n_fft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hop_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pad_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// 填充模式示例</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">win_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span><span class="c1">// 窗口类型示例</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">stft</span><span class="p">(</span><span class="n">input_real</span><span class="p">,</span><span class="w"> </span><span class="n">input_imag</span><span class="p">,</span><span class="w"> </span><span class="n">realInput</span><span class="p">,</span><span class="w"> </span><span class="n">normalize</span><span class="p">,</span><span class="w"> </span><span class="n">n_fft</span><span class="p">,</span><span class="w"> </span><span class="n">hop_len</span><span class="p">,</span><span class="w"> </span><span class="n">pad_mode</span><span class="p">,</span><span class="w"> </span><span class="n">win_mode</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="istft">
<h2><span class="section-number">4.14.44. </span>istft<a class="headerlink" href="#istft" title="Link to this heading"></a></h2>
<p>Inverse Short-Time Fourier Transform(ISTFT)</p>
<p><strong>Note:</strong> For details about whether this operator in current SDK supports BM1684X, check the page “BMCV API” in 《Multimedia User Guide》.</p>
<dl>
<dt><strong>Interface1:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">istft</span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_real</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_imag</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">realInput</span><span class="p">,</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">normalize</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">L</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hop_len</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pad_mode</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">win_mode</span>
<span class="w">    </span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>input_real: numpy.ndarray or Tensor</dt><dd><p>The real part of the input signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>input_imag: numpy.ndarray or Tensor</dt><dd><p>The imaginary part of the input signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>real_input: bool</dt><dd><p>Indicates whether the output signal is real; false for complex, true for real.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>normalize: bool</dt><dd><p>Whether to normalize the output.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>L: int</dt><dd><p>The length of the original time-domain signal.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>hop_len: int</dt><dd><p>The step size for sliding the window; must match the value used during STFT computation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pad_mode: int</dt><dd><p>The padding mode for the input signal; must match the value used during STFT computation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>win_mode: int</dt><dd><p>The type of window function; must match the value used during STFT computation.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the real part and imaginary part of the output.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">513</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_real</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_imag</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">real_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">normalize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">hop_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">pad_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">win_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">istft</span><span class="p">(</span><span class="n">input_real</span><span class="p">,</span><span class="w"> </span><span class="n">input_imag</span><span class="p">,</span><span class="w"> </span><span class="n">realInput</span><span class="p">,</span><span class="w"> </span><span class="n">normalize</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="n">hop_len</span><span class="p">,</span><span class="w"> </span><span class="n">pad_mode</span><span class="p">,</span><span class="w"> </span><span class="n">win_mode</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="faiss-indexflatl2">
<h2><span class="section-number">4.14.45. </span>faiss_indexflatL2<a class="headerlink" href="#faiss-indexflatl2" title="Link to this heading"></a></h2>
<p>Calculate squared L2 distance between query vectors and database vectors, output the top topK L2sqr-values and the corresponding indices.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">faiss_indexflatL2</span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">query_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">query_vecs_L2norm</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">database_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="o">&amp;</span><span class="w"> </span><span class="n">database_vecs_L2norm</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_nums</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_nums</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span>
<span class="w">    </span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>query_vecs: Tensor</dt><dd><p>The query vectors, the supported data type is only sail.Dtype.BM_FLOAT32.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query_vecs_L2norm: Tensor</dt><dd><p>Calculates the sum of the square values of the elements in each row of the query vector, the data type is sail.Dtype.BM_FLOAT32.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs: Tensor</dt><dd><p>The database vectors, the supported data type is only sail.Dtype.BM_FLOAT32.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs_L2norm: Tensor</dt><dd><p>Calculates the sum of the square values of the elements in each row of the database vector, the data type is sail.Dtype.BM_FLOAT32..</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>vec_dims: int</dt><dd><p>The dimension of the query vectors and database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query_vecs_nums: int</dt><dd><p>The numbers of the query vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs_nums: int</dt><dd><p>The numbers of the database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>topK: int</dt><dd><p>Get top topK values.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the square value of the top topK best-matched L2 distance and its corresponding index.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>*Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
<span class="w">    </span><span class="c1">// 1. database_vecs</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">db_vecs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mf">-2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">-5.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-1.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-3.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-4.0f</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// 2. query_vecs</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">query_vecs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// 3. test bmcv.faiss_indexflatL2</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">db_vecs_l2norm</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">db_vecs_l2norm</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sum</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query_vecs_l2norm</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">query_vecs_l2norm</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sum</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">database_vecs_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">database_vecs_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">database_vecs_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">database_vecs_L2norm_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">database_vecs_L2norm_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">db_vecs_l2norm</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">database_vecs_L2norm_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">query_vecs_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">query_vecs_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">query_vecs_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">query_vecs_L2norm_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">query_vecs_L2norm_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">query_vecs_l2norm</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">query_vecs_L2norm_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">faiss_indexflatL2</span><span class="p">(</span><span class="n">query_vecs_tensor</span><span class="p">,</span><span class="w"> </span><span class="n">query_vecs_L2norm_tensor</span><span class="p">,</span><span class="w"> </span><span class="n">database_vecs_tensor</span><span class="p">,</span><span class="w"> </span><span class="n">database_vecs_L2norm_tensor</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="faiss-indexflatip">
<h2><span class="section-number">4.14.46. </span>faiss_indexflatIP<a class="headerlink" href="#faiss-indexflatip" title="Link to this heading"></a></h2>
<p>Calculate inner product distance between query vectors and database vectors, output the top K IP-values and the corresponding indices.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">faiss_indexflatIP</span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">query_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">database_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_nums</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_nums</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span>
<span class="w">    </span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>query_vecs: Tensor</dt><dd><p>The query vectors, the supported data type is only sail.Dtype.BM_FLOAT32.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs: Tensor</dt><dd><p>The database vectors, the supported data type is only sail.Dtype.BM_FLOAT32.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>vec_dims: int</dt><dd><p>The dimension of the query vectors and database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query_vecs_nums: int</dt><dd><p>The numbers of the query vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs_nums: int</dt><dd><p>The numbers of the database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>topK: int</dt><dd><p>Get top topK values.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the top topK best-matched inner product distance values and their corresponding indexes.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
<span class="w">    </span><span class="c1">// 1. database_vecs</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">db_vecs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mf">-2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">-5.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-1.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-3.0f</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">-4.0f</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// 2. query_vecs</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">query_vecs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mf">1.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0f</span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// 3. test bmcv.faiss_indexflatL2</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">database_vecs_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">database_vecs_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span><span class="n">db_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">db_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">database_vecs_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">query_vecs_tensor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()},</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">query_vecs_tensor</span><span class="p">.</span><span class="n">reset_sys_data</span><span class="p">(</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">query_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()});</span>
<span class="w">    </span><span class="n">query_vecs_tensor</span><span class="p">.</span><span class="n">sync_s2d</span><span class="p">();</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">faiss_indexflatIP</span><span class="p">(</span><span class="n">query_vecs_tensor</span><span class="p">,</span><span class="w"> </span><span class="n">database_vecs_tensor</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="faiss-indexpq-encode">
<h2><span class="section-number">4.14.47. </span>faiss_indexPQ_encode<a class="headerlink" href="#faiss-indexpq-encode" title="Link to this heading"></a></h2>
<p>Perform PQ quantization encoding on the input vector and output the encoded vector.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">faiss_indexPQ_encode</span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">input_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">centroids_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">encoded_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">encode_vecs_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">IP_metric</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>input_vecs: Tensor</dt><dd><p>Input vector to be encoded, data types are supported only numpy.float32 or sail.Dtype.BM_FLOAT32, encode_vecs_num * vec_dims.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>centroids_vecs: Tensor</dt><dd><p>centroids vector,  data types are supported only numpy.float32 or sail.Dtype.BM_FLOAT32, slice_num * centroids_num * (vec_dims / slice_num).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>encoded_vecs: Tensor</dt><dd><p>Output the encoded vector. The data type is BM_UINT8 and the size is encode_vecs_num * slice_num.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>encode_vecs_num: int</dt><dd><p>The number of vectors to be encoded.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>vec_dims: int</dt><dd><p>Dimension of the vector to be encoded.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>slice_num: int</dt><dd><p>The number of slices of the original vector dimensions, for example the original vector dimension is 512, slice_num = 8, and each subvector dimension is 64.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>centroids_num: int</dt><dd><p>The number of centroids.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IP_metric: int</dt><dd><p>0 indicates that the distance is calculated using L2, and 1 indicates that the distance is calculated using IP.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: int</dt><dd><p>Returns 0 on success.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">encode_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">db_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">subvec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">slice_num</span><span class="p">;</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// centroids Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">centroids_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">slice_num</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span><span class="w"> </span><span class="n">subvec_dim</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">centroids_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// input Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">encode_vecs_num</span><span class="p">,</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">input_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">input_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// encoded Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">encoded_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">encode_vecs_num</span><span class="p">,</span><span class="w"> </span><span class="n">slice_num</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">encoded_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">encoded_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_UINT8</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">faiss_indexPQ_encode</span><span class="p">(</span><span class="n">input_tensor</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">centroids_tensor</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">encoded_tensor</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">encode_vecs_num</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">                                    </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">                                    </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="faiss-indexpq-adc">
<h2><span class="section-number">4.14.48. </span>faiss_indexPQ_ADC<a class="headerlink" href="#faiss-indexpq-adc" title="Link to this heading"></a></h2>
<p>The distance table is calculated by the query vector and the clustering center (centroid) vector, and the encoded database vector searches the table to calculate the distance and sorts it, output the topK distances and the corresponding indices.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">faiss_indexPQ_ADC</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nxquery_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">centroids_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nycodes_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">IP_metric</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>nxquery_vecs: Tensor</dt><dd><p>query vectors, data types are supported only sail.Dtype.BM_FLOAT32, and the size is query_vecs_nums * vec_dims.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>centroids_vecs: Tensor</dt><dd><p>centroids vectors, data types are supported only sail.Dtype.BM_FLOAT32, and the size is slice_num * centroids_num * (vec_dims / slice_num).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nycodes_vecs: Tensor</dt><dd><p>Encoded database vector, data types are supported only sail.Dtype.BM_UINT8, and the size is database_vecs_nums * slice_num.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>vec_dims: int</dt><dd><p>dimension of the query vector.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>slice_num: int</dt><dd><p>The number of slices of the original vector dimensions, for example the original vector dimension is 512, slice_num = 8, and each subvector dimension is 64.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>centroids_num: int</dt><dd><p>The number of centroids.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs_nums: int</dt><dd><p>The number of database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query_vecs_nums: int</dt><dd><p>The number of query vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>topK: int</dt><dd><p>Get top topK values.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IP_metric: int</dt><dd><p>0 indicates that the distance is calculated using L2, and 1 indicates that the distance is calculated using IP.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the top topK best-matched distance values and their corresponding indexes.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">subvec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">slice_num</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// nxquery Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nxquery_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs_num</span><span class="p">,</span><span class="w"> </span><span class="n">vec_dims</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">nxquery_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">nxquery_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// centroids Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">centroids_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">slice_num</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span><span class="w"> </span><span class="n">subvec_dim</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">centroids_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// nycodes Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nycodes_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">database_vecs_nums</span><span class="p">,</span><span class="w"> </span><span class="n">slice_num</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">nycodes_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">nycodes_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_UINT8</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">faiss_indexPQ_ADC</span><span class="p">(</span><span class="n">nxquery_tensor</span><span class="p">,</span>
<span class="w">                                </span><span class="n">centroids_tensor</span><span class="p">,</span>
<span class="w">                                </span><span class="n">nycodes_tensor</span><span class="p">,</span>
<span class="w">                                </span><span class="n">vec_dims</span><span class="p">,</span>
<span class="w">                                </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">                                </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">                                </span><span class="n">database_vecs_num</span><span class="p">,</span>
<span class="w">                                </span><span class="n">query_vecs_num</span><span class="p">,</span>
<span class="w">                                </span><span class="n">topK</span><span class="p">,</span>
<span class="w">                                </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">results</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="faiss-indexpq-sdc">
<h2><span class="section-number">4.14.49. </span>faiss_indexPQ_SDC<a class="headerlink" href="#faiss-indexpq-sdc" title="Link to this heading"></a></h2>
<p>The Symmetric Distance Computation (SDC) lookup table is used to speed up the distance calculation between PQ encodings, output the topK distances and the corresponding indices.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">faiss_indexPQ_SDC</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nxcodes_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nycodes_vecs</span><span class="p">,</span>
<span class="w">    </span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sdc_table</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_num</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">IP_metric</span>
<span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>nxcodes_vecs: Tensor</dt><dd><p>Encoded query vectors, data types are supported only sail.Dtype.BM_UINT8, and the size is query_vecs_nums * slice_num.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nycodes_vecs: Tensor</dt><dd><p>Encoded database vector, data types are supported only sail.Dtype.BM_UINT8, and the size is database_vecs_nums * slice_num.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>sdc_table: Tensor</dt><dd><p>The Symmetric Distance Computation (SDC) lookup table, data types are supported only sail.Dtype.BM_FLOAT32, and the size is slice_num * centroids_num * centroids_num.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>slice_num: int</dt><dd><p>The number of slices of the original vector dimensions, for example the original vector dimension is 512, slice_num = 8, and each subvector dimension is 64.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>centroids_num: int</dt><dd><p>The number of centroids.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>database_vecs_nums: int</dt><dd><p>The number of database vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>query_vecs_nums: int</dt><dd><p>The number of query vectors.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>topK: int</dt><dd><p>Get top topK values.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>IP_metric: int</dt><dd><p>0 indicates that the distance is calculated using L2, and 1 indicates that the distance is calculated using IP.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt>result: tuple[Tensor, Tensor]</dt><dd><p>Returns the top topK best-matched distance values and their corresponding indexes.</p>
</dd>
</dl>
</li>
</ul>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sail/cvwrapper.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">slice_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">centroids_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">database_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">query_vecs_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">subvec_dims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec_dims</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">slice_num</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">topK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Bmcv</span><span class="w"> </span><span class="n">bmcv</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// nxcodes Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nxcodes_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">query_vecs_num</span><span class="p">,</span><span class="w"> </span><span class="n">slice_num</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">nxcodes_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">nxcodes_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_UINT8</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// nycodes Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nycodes_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">database_vecs_nums</span><span class="p">,</span><span class="w"> </span><span class="n">slice_num</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">nycodes_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">nycodes_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_UINT8</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// sdc_table Tensor</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sdc_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">slice_num</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">,</span><span class="w"> </span><span class="n">centroids_num</span><span class="p">};</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="n">sdc_tensor</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">sdc_shape</span><span class="p">,</span><span class="w"> </span><span class="n">BM_FLOAT32</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>


<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bmcv</span><span class="p">.</span><span class="n">faiss_indexPQ_SDC</span><span class="p">(</span><span class="n">nxcodes_tensor</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">nycodes_tensor</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">sdc_tensor</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">slice_num</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">centroids_num</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">database_vecs_num</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">query_vecs_num</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="n">topK</span><span class="p">,</span>
<span class="w">                                                                            </span><span class="mi">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">results</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cpp_Decoder_RawStream.html" class="btn btn-neutral float-left" title="4.13. Decoder_RawStream" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cpp_Blend.html" class="btn btn-neutral float-right" title="4.15. Blend" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SOPHGO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>