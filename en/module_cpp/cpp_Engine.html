

<!DOCTYPE html>
<html class="writer-html5" lang="en-EN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.6. Engine &mdash; SOPHON-SAIL 3.10.2
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01d1187f"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.7. MultiEngine" href="cpp_MultiEngine.html" />
    <link rel="prev" title="4.5. Tensor" href="cpp_Tensor.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SOPHON-SAIL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Catalog</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_disclaimer.html">1. Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_sail.html">2. SAIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_build.html">3. Compilation and Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../4_module_cpp.html">4. SAIL C++ API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cpp_basicfunction.html">4.1. Basic function</a></li>
<li class="toctree-l2"><a class="reference internal" href="0_enum-type/enum-index.html">4.2. SAIL enum type</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_PaddingAtrr.html">4.3. PaddingAtrr</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Handle.html">4.4. Handle</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Tensor.html">4.5. Tensor</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.6. Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#constructor">4.6.1. Constructor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-handle">4.6.2. get_handle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load">4.6.3. load</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-graph-names">4.6.4. get_graph_names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-io-mode">4.6.5. set_io_mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graph-is-dynamic">4.6.6. graph_is_dynamic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-input-names">4.6.7. get_input_names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-output-names">4.6.8. get_output_names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-max-input-shapes">4.6.9. get_max_input_shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-input-shape">4.6.10. get_input_shape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-max-output-shapes">4.6.11. get_max_output_shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-output-shape">4.6.12. get_output_shape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-input-dtype">4.6.13. get_input_dtype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-output-dtype">4.6.14. get_output_dtype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-input-scale">4.6.15. get_input_scale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-output-scale">4.6.16. get_output_scale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#process">4.6.17. process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-device-id">4.6.18. get_device_id</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-input-tensors-map">4.6.19. create_input_tensors_map</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-output-tensors-map">4.6.20. create_output_tensors_map</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cpp_MultiEngine.html">4.7. MultiEngine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_bm_image.html">4.8. bm_image</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_BMImage.html">4.9. BMImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_BMImageArray.html">4.10. BMImageArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Decoder.html">4.11. Decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Encoder.html">4.12. Encoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Decoder_RawStream.html">4.13. Decoder_RawStream</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Bmcv.html">4.14. Bmcv</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_Blend.html">4.15. Blend</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_MultiDecoder.html">4.16. MultiDecoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_high_perform_interface/high_perform_index_cpp.html">4.17. SAIL C++ high performance interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5_module_python.html">5. SAIL Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_appendix.html">6. Appendix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SOPHON-SAIL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../4_module_cpp.html"><span class="section-number">4. </span>SAIL C++ API</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.6. </span>Engine</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/module_cpp/cpp_Engine.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="engine">
<h1><span class="section-number">4.6. </span>Engine<a class="headerlink" href="#engine" title="Link to this heading"></a></h1>
<p>Engine can load and manage bmodel and is the main module for model reasoning.</p>
<section id="constructor">
<h2><span class="section-number">4.6.1. </span>Constructor<a class="headerlink" href="#constructor" title="Link to this heading"></a></h2>
<p>Initialize Engine</p>
<p><strong>Interface 1:</strong></p>
<p>Create an Engine instance and do not load bmodel</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Engine</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">tpu_id</span><span class="p">);</span>

<span class="n">Engine</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Handle</span><span class="o">&amp;</span><span class="w">   </span><span class="n">handle</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>tpu_id: int</p></li>
</ul>
<p>Specify the Tensor Computing Processor id used by the Engine instance</p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>Specify the device identification Handle used by the Engine instance</p>
<p><strong>Interface 2:</strong></p>
<p>To create an Engine instance and load bmodel, you need to specify the bmodel path or location in memory.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Engine</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">bmodel_path</span><span class="p">,</span>
<span class="w">   </span><span class="kt">int</span><span class="w">                </span><span class="n">tpu_id</span><span class="p">,</span>
<span class="w">   </span><span class="n">IOMode</span><span class="w">             </span><span class="n">mode</span><span class="p">);</span>

<span class="n">Engine</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">bmodel_path</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">Handle</span><span class="o">&amp;</span><span class="w">      </span><span class="n">handle</span><span class="p">,</span>
<span class="w">   </span><span class="n">IOMode</span><span class="w">             </span><span class="n">mode</span><span class="p">);</span>

<span class="n">Engine</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">bmodel_ptr</span><span class="p">,</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">      </span><span class="n">bmodel_size</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">         </span><span class="n">tpu_id</span><span class="p">,</span>
<span class="w">    </span><span class="n">IOMode</span><span class="w">      </span><span class="n">mode</span><span class="p">);</span>

<span class="n">Engine</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w">        </span><span class="n">bmodel_ptr</span><span class="p">,</span>
<span class="w">   </span><span class="kt">size_t</span><span class="w">             </span><span class="n">bmodel_size</span><span class="p">,</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">Handle</span><span class="o">&amp;</span><span class="w">      </span><span class="n">handle</span><span class="p">,</span>
<span class="w">   </span><span class="n">IOMode</span><span class="w">             </span><span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>bmodel_path: string</p></li>
</ul>
<p>Specify the path to the bmodel file</p>
<ul class="simple">
<li><p>tpu_id: int</p></li>
</ul>
<p>Specify the Tensor Computing Processor id used by the Engine instance</p>
<ul class="simple">
<li><p>mode: IOMode</p></li>
</ul>
<p>Specify the memory location where the input/output Tensor is located: system memory or device memory.</p>
<ul class="simple">
<li><p>bmodel_ptr: void*</p></li>
</ul>
<p>The starting address of bmodel in system memory.</p>
<ul class="simple">
<li><p>bmodel_size: size_t</p></li>
</ul>
<p>The number of bytes in memory of bmodel</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine1</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine2</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine3</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">,</span><span class="w"> </span><span class="n">SYSI</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine4</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">,</span><span class="w"> </span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">SYSI</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Open file input stream</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="w"> </span><span class="n">file</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Get file size</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">end</span><span class="p">);</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">bmodel_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="n">tellg</span><span class="p">();</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">seekg</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">beg</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Allocate memory to store model data</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">bmodel_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="kt">char</span><span class="p">[</span><span class="n">bmodel_size</span><span class="p">];</span>
<span class="w">    </span><span class="c1">// Read file content into memory</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">bmodel_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">bmodel_size</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Close file input stream</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine5</span><span class="p">(</span><span class="n">bmodel_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">bmodel_size</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">SYSI</span><span class="p">);</span>
<span class="w">    </span><span class="n">delete</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">bmodel_ptr</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-handle">
<h2><span class="section-number">4.6.2. </span>get_handle<a class="headerlink" href="#get-handle" title="Link to this heading"></a></h2>
<p>Get the device handle sail.Handle used in Engine</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Handle</span><span class="w"> </span><span class="nf">get_handle</span><span class="p">();</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>handle: Handle</p></li>
</ul>
<p>Returns the device handle in Engine.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine1</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine1</span><span class="p">.</span><span class="n">get_handle</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="load">
<h2><span class="section-number">4.6.3. </span>load<a class="headerlink" href="#load" title="Link to this heading"></a></h2>
<p>Load bmodel into Engine.</p>
<p><strong>Interface 1:</strong></p>
<p>Specify the bmodel path and load bmodel from the file.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">bmodel_path</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 1:</strong></p>
<ul class="simple">
<li><p>bmodel_path: string</p></li>
</ul>
<p>The file path of bmodel.</p>
<p><strong>Interface 2:</strong></p>
<p>Load bmodel from system memory.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">bmodel_ptr</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">bmodel_size</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Parameters 2:</strong></p>
<ul class="simple">
<li><p>bmodel_ptr: void*</p></li>
</ul>
<p>The starting address of bmodel in system memory.</p>
<ul class="simple">
<li><p>bmodel_size: size_t</p></li>
</ul>
<p>The number of bytes in memory of bmodel.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// load failed</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Engine load bmodel &quot;</span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">bmodel_file</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;failed&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-graph-names">
<h2><span class="section-number">4.6.4. </span>get_graph_names<a class="headerlink" href="#get-graph-names" title="Link to this heading"></a></h2>
<p>Get the names of all calculation graphs loaded in Engine.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_graph_names</span><span class="p">();</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>graph_names: std::vector&lt;std::string&gt;</p></li>
</ul>
<p>An array of names of all calculation graphs in Engine.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="set-io-mode">
<h2><span class="section-number">4.6.5. </span>set_io_mode<a class="headerlink" href="#set-io-mode" title="Link to this heading"></a></h2>
<p>Set the memory location where the input/output Tensor of Engine is located: system memory or device memory.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">set_io_mode</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="n">IOMode</span><span class="w">             </span><span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>The name of the calculation graph that needs to be configured.</p>
<ul class="simple">
<li><p>mode: IOMode</p></li>
</ul>
<p>Set the memory location where the input/output Tensor of Engine is located: system memory or device memory.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">set_io_mode</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">SYSI</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="graph-is-dynamic">
<h2><span class="section-number">4.6.6. </span>graph_is_dynamic<a class="headerlink" href="#graph-is-dynamic" title="Link to this heading"></a></h2>
<p>Determine whether a selected computational map is dynamic.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="nf">graph_is_dynamic</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>is_dynamic: bool</p></li>
</ul>
<p>A boolean value indicating whether the selected computation graph is dynamic or not.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">graph_is_dynamic</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-input-names">
<h2><span class="section-number">4.6.7. </span>get_input_names<a class="headerlink" href="#get-input-names" title="Link to this heading"></a></h2>
<p>Get the names of all input Tensors in the selected calculation graph</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_input_names</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>input_names: std::vector&lt;std::string&gt;</p></li>
</ul>
<p>Returns a list of the names of all input Tensors in the selected computation graph.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-output-names">
<h2><span class="section-number">4.6.8. </span>get_output_names<a class="headerlink" href="#get-output-names" title="Link to this heading"></a></h2>
<p>Get the names of all output Tensors in the selected calculation graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_output_names</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>output_names: std::vector&lt;std::string&gt;</p></li>
</ul>
<p>Returns a list of the names of all output Tensors in the selected calculation graph.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-max-input-shapes">
<h2><span class="section-number">4.6.9. </span>get_max_input_shapes<a class="headerlink" href="#get-max-input-shapes" title="Link to this heading"></a></h2>
<p>Query the maximum shape corresponding to all input Tensors in the selected calculation graph.</p>
<p>In the static model, the shape of the input Tensor is fixed and should be equal to the maximum shape.</p>
<p>In the dynamic model, the shape of the input Tensor should be less than or equal to the maximum shape.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">get_max_input_shapes</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>max_shapes: std::map&lt;std::string, std::vector&lt;int&gt; &gt;</p></li>
</ul>
<p>Returns the largest shape in the input Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">input_max_shapes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_max_input_shapes</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-input-shape">
<h2><span class="section-number">4.6.10. </span>get_input_shape<a class="headerlink" href="#get-input-shape" title="Link to this heading"></a></h2>
<p>Query the shape of a specific input Tensor in the selected computational graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_input_shape</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>tensor_shape: std::vector&lt;int&gt;</p></li>
</ul>
<p>The shape of the largest dimension in the input Tensor under this name.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_shape_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_shape</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">input_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-max-output-shapes">
<h2><span class="section-number">4.6.11. </span>get_max_output_shapes<a class="headerlink" href="#get-max-output-shapes" title="Link to this heading"></a></h2>
<p>Query the maximum shape corresponding to all output Tensors in the selected calculation graph.</p>
<p>In the static model, the shape of the output Tensor is fixed and should be equal to the maximum shape.</p>
<p>In the dynamic model, the shape of the output Tensor should be less than or equal to the maximum shape.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">get_max_output_shapes</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>std::map&lt;std::string, std::vector&lt;int&gt; &gt;</p></li>
</ul>
<p>Returns the largest shape in the output Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">output_max_shapes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_max_output_shapes</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-output-shape">
<h2><span class="section-number">4.6.12. </span>get_output_shape<a class="headerlink" href="#get-output-shape" title="Link to this heading"></a></h2>
<p>Query the shape of a specific output Tensor in the selected calculation graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_output_shape</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>tensor_shape: std::vector&lt;int&gt;</p></li>
</ul>
<p>The shape of the output Tensor under this name.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_shape_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_shape</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">output_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-input-dtype">
<h2><span class="section-number">4.6.13. </span>get_input_dtype<a class="headerlink" href="#get-input-dtype" title="Link to this heading"></a></h2>
<p>Get the data type of a specific input Tensor for a specific computational graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="nf">get_input_dtype</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>datatype: bm_data_type_t</p></li>
</ul>
<p>Returns the data type of the data in the Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_dype_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_dtype</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">input_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-output-dtype">
<h2><span class="section-number">4.6.14. </span>get_output_dtype<a class="headerlink" href="#get-output-dtype" title="Link to this heading"></a></h2>
<p>Get the data type of a specific output Tensor for a specific computational graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="nf">get_output_dtype</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>datatype: bm_data_type_t</p></li>
</ul>
<p>Returns the data type of the data in the Tensor.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_dype_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_dtype</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">input_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-input-scale">
<h2><span class="section-number">4.6.15. </span>get_input_scale<a class="headerlink" href="#get-input-scale" title="Link to this heading"></a></h2>
<p>Get the scale of a specific input Tensor of a specific calculation graph, only valid in the int8 model.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="w"> </span><span class="nf">get_input_scale</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>scale: float32</p></li>
</ul>
<p>Returns the scale of the Tensor data.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">input_scale_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_scale</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">input_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-output-scale">
<h2><span class="section-number">4.6.16. </span>get_output_scale<a class="headerlink" href="#get-output-scale" title="Link to this heading"></a></h2>
<p>Get the scale of a specific output Tensor of a specific calculation graph, only valid in the int8 model.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="w"> </span><span class="nf">get_output_scale</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">tensor_name</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Set the name of the calculation graph to be queried.</p>
<ul class="simple">
<li><p>tensor_name: string</p></li>
</ul>
<p>The name of the Tensor to be queried.</p>
<p><strong>Returns:</strong></p>
<ul class="simple">
<li><p>scale: float32</p></li>
</ul>
<p>Returns the scale of the Tensor data.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bmodel_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">bmodel_name</span><span class="p">);</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">output_scale_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_scale</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">input_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="process">
<h2><span class="section-number">4.6.17. </span>process<a class="headerlink" href="#process" title="Link to this heading"></a></h2>
<p>Perform forward inference on a specific computational graph.</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w">              </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;&amp;</span><span class="w"> </span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;&amp;</span><span class="w"> </span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w">                </span><span class="n">core_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{});</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w">                       </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;&amp;</span><span class="w">          </span><span class="n">input</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">input_shapes</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;&amp;</span><span class="w">          </span><span class="n">output</span><span class="p">,</span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w">                         </span><span class="n">core_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{});</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>Input parameter. A specific computational graph name.</p>
<ul class="simple">
<li><p>input: std::map&lt;std::string, Tensor*&gt;</p></li>
</ul>
<p>Input parameter. All input Tensor data.</p>
<ul class="simple">
<li><p>input_shapes : std::map&lt;std::string, std::vector&lt;int&gt; &gt;</p></li>
</ul>
<p>Input parameter. All shapes passed into Tensor.</p>
<ul class="simple">
<li><p>output: std::map&lt;std::string, Tensor*&gt;</p></li>
</ul>
<p>Output parameter. All output Tensor data.</p>
<ul class="simple">
<li><p>core_list: std::vector&lt;int&gt;</p></li>
</ul>
<p>Input parameter. This parameter is only valid for processors that support multi-core inference, and the core used for inference can be selected. Set bmodel as the corresponding kernel number N, and if corelist is empty, use N cores starting from core0 for inference; If the length of corelist is greater than N, use the corresponding top N cores in corelist for inference. This parameter can be ignored for processors that only support single core inference.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">graph_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_names</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_shape</span><span class="p">,</span><span class="w"> </span><span class="n">output_shape</span><span class="p">;</span>
<span class="w">    </span><span class="n">bm_data_type_t</span><span class="w"> </span><span class="n">input_dtype</span><span class="p">,</span><span class="w"> </span><span class="n">output_dtype</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// allocate input and output tensors with both system and device memory</span>
<span class="w">    </span><span class="c1">// or you can use engine.create_input\output_tensors_map to create</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">input_names</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">input_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_shape</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">input_names</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">        </span><span class="n">input_dtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_dtype</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">input_names</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">        </span><span class="n">input_tensor</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">input_shape</span><span class="p">,</span><span class="w"> </span><span class="n">input_dtype</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">        </span><span class="n">input_tensors</span><span class="p">[</span><span class="n">input_names</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_tensor</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">output_names</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">output_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_shape</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">output_names</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">        </span><span class="n">output_dtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_output_dtype</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">output_names</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">        </span><span class="n">output_tensor</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="w"> </span><span class="n">output_shape</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">output_dtype</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">        </span><span class="n">output_tensors</span><span class="p">[</span><span class="n">output_names</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">output_tensor</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// process1</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">process</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">input_tensors</span><span class="p">,</span><span class="w"> </span><span class="n">output_tensors</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// process2</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">input_shapes</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input_name</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">input_names</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">input_shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_input_shape</span><span class="p">(</span><span class="n">bmodel_names</span><span class="p">,</span><span class="w"> </span><span class="n">input_name</span><span class="p">);</span>
<span class="w">        </span><span class="n">input_shapes</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_shape</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">process</span><span class="p">(</span><span class="n">graph_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">input_tensors</span><span class="p">,</span><span class="w"> </span><span class="n">input_shapes</span><span class="p">,</span><span class="w"> </span><span class="n">output_tensors</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="get-device-id">
<h2><span class="section-number">4.6.18. </span>get_device_id<a class="headerlink" href="#get-device-id" title="Link to this heading"></a></h2>
<p>Get the device ID number in Engine</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">get_device_id</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>tpu_id : int</p></li>
</ul>
<p>Returns the device ID number in Engine.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">engine</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_device_id</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="create-input-tensors-map">
<h2><span class="section-number">4.6.19. </span>create_input_tensors_map<a class="headerlink" href="#create-input-tensors-map" title="Link to this heading"></a></h2>
<p>Create a map of the input Tensor</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">create_input_tensors_map</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">create_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>The name of specific computational graph.</p>
<ul class="simple">
<li><p>create_mode: int</p></li>
</ul>
<p>Create a pattern for Tensor to allocate memory. When it is 0, only system memory is allocated. When it is 1, only device memory is allocated. Otherwise, it is allocated according to the IOMode configuration in Engine.</p>
<p><strong>Returns:</strong></p>
<p>input: std::map&lt;std::string, Tensor*&gt;</p>
<p>Returns the mapping of strings to tensors.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>


<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">IOMode</span><span class="o">::</span><span class="n">SYSIO</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">graph_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">input_tensors_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">create_input_tensors_map</span><span class="p">(</span><span class="n">graph_name</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="create-output-tensors-map">
<h2><span class="section-number">4.6.20. </span>create_output_tensors_map<a class="headerlink" href="#create-output-tensors-map" title="Link to this heading"></a></h2>
<p>Create a mapping of the input Tensor, which is a dictionary dict{string : Tensor} in the python interface</p>
<dl>
<dt><strong>Interface:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Tensor</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">create_output_tensors_map</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">graph_name</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">create_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span>
</pre></div>
</div>
</dd>
</dl>
<p><strong>Parameters:</strong></p>
<ul class="simple">
<li><p>graph_name: string</p></li>
</ul>
<p>The name of specific computational graph.</p>
<ul class="simple">
<li><p>create_mode: int</p></li>
</ul>
<p>Create a pattern for Tensor to allocate memory. When it is 0, only system memory is allocated. When it is 1, only device memory is allocated. Otherwise, it is allocated according to the IOMode configuration in Engine.</p>
<p><strong>Returns:</strong></p>
<p>output: std::map&lt;std::string, Tensor*&gt;</p>
<p>Returns a mapping of strings to tensors.</p>
<dl>
<dt><strong>Sample:</strong></dt><dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;engine.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">dev_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Handle</span><span class="w"> </span><span class="n">handle</span><span class="p">(</span><span class="n">dev_id</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">bmodel_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;your_bmodel.bmodel&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">sail</span><span class="o">::</span><span class="n">Engine</span><span class="w"> </span><span class="n">engine</span><span class="p">(</span><span class="n">bmodel_path</span><span class="p">,</span><span class="w"> </span><span class="n">dev_id</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">IOMode</span><span class="o">::</span><span class="n">SYSIO</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">graph_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">get_graph_names</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">sail</span><span class="o">::</span><span class="n">Tensor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">output_tensors_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engine</span><span class="p">.</span><span class="n">create_output_tensors_map</span><span class="p">(</span><span class="n">graph_name</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cpp_Tensor.html" class="btn btn-neutral float-left" title="4.5. Tensor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cpp_MultiEngine.html" class="btn btn-neutral float-right" title="4.7. MultiEngine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, SOPHGO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>